{"version":3,"sources":["webpack://grapesjs-plugin-toolbox/webpack/universalModuleDefinition","webpack://grapesjs-plugin-toolbox/webpack/bootstrap","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/typeof.js","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://grapesjs-plugin-toolbox/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://grapesjs-plugin-toolbox/./src/consts.js","webpack://grapesjs-plugin-toolbox/./src/utils/breadcrumbs.js","webpack://grapesjs-plugin-toolbox/./node_modules/colorthief/dist/color-thief.mjs","webpack://grapesjs-plugin-toolbox/./src/utils/palette.js","webpack://grapesjs-plugin-toolbox/./src/utils/repetition.js","webpack://grapesjs-plugin-toolbox/./src/utils/store.js","webpack://grapesjs-plugin-toolbox/./src/utils/resizer.js","webpack://grapesjs-plugin-toolbox/./src/components.js","webpack://grapesjs-plugin-toolbox/./src/blocks.js","webpack://grapesjs-plugin-toolbox/./src/panels.js","webpack://grapesjs-plugin-toolbox/./src/grid.js","webpack://grapesjs-plugin-toolbox/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","_typeof","iterator","constructor","Array","isArray","_i","_s","_e","_arr","_n","_d","next","done","push","length","err","arrayLikeToArray","minLen","toString","slice","from","test","len","arr2","TypeError","cmdSave","gridCompId","gridChildId","editor","config","generateTree","el","tagName","toLowerCase","parentNode","id","$","pfx","Config","stylePrefix","on","model","str","breadcrumbs","append","html","getEl","className","split","forEach","cls","find","e","doc","Canvas","getDocument","select","querySelector","currentTarget","innerText","trim","map","index","naturalOrder","sum","reduce","max","Math","apply","sort","peek","pop","size","debug","u","this","r1","r2","g1","g2","b1","b2","histo","a","vboxes","vbox","count","volume","copy","h","f","v","min","_volume","_count_set","_count","avg","_avg","contains","gval","bval","color","palette","nearest","sqrt","pow","forcebw","quantize","g","b","canvas","document","createElement","context","getContext","width","naturalWidth","height","naturalHeight","drawImage","getImageData","getColor","getPalette","colorCount","quality","Number","isInteger","Error","data","getColorFromUrl","addEventListener","src","XMLHttpRequest","open","responseType","onload","status","Uint8Array","response","String","fromCharCode","join","btoa","send","getColorAsync","opts","colorthief","ColorThief","colorsNum","commandId","labelColors","labelApply","paletteIcon","onAdd","domc","DomComponents","typeImage","getType","addType","initToolbar","arguments","tb","tbExists","some","item","command","unshift","label","set","Commands","add","run","ed","options","target","getSelected","colorArr","getDominantColor","paletteArr","getPaletteArray","generateColorsFromArray","content","createContent","title","btn","children","Modal","getModel","once","stopCommand","onclick","addPalette","stop","close","colorOutput","col","sm","StyleManager","colorPicker","pickerPalette","refreshPalette","input","refreshPickerPalette","at","getProperties","sector","models","indexOf","getProperty","removeProperty","addProperty","img","cols","groupRepeatedUnits","templateUnitArray","unit","templateArray","groups","shift","templateUnit","lastGroup","createRepetition","auto","maxRepetition","group","state","columns","rows","columngap","rowgap","colArr","rowArr","childarea","getters","colTemplate","unitGroups","rowTemplate","divNum","mutations","initialArrIndex","payload","queryParams","URLSearchParams","stateKey","paramIsValid","has","paramType","JSON","parse","createArr","adjustArr","newVal","oldVal","difference","direction","addChildren","removeChildren","splice","updateAuto","updateMin","updateColumns","updateRows","updateColumnGap","updateRowGap","resetGrid","frame","deviceManager","Devices","hints","css","setTimeout","device","getDevice","showDeviceResolution","initDeviceEventHandle","getWindowDims","hideOnZoom","getZoom","glutterResize","addClass","copyGlutterResize","clone","before","trigger","maxDeviceSize","parseInt","widthIframe","maxLeftPos","draggable","axis","minScreenSize","start","getFrameEl","offsetWidth","drag","uleft","total","getOffset","left","dragDampen","res","leftDesc","round","refresh","console","error","remove","runCommand","w","docEl","compatMode","documentElement","body","clientWidth","clientHeight","innerWidth","innerHeight","glutterHandleObj","leftGlutterHandleBar","rightGlutterHandleBar","leftOffset","rightOffset","removeClass","element","pos1","pos2","pos3","pos4","falseCountX","falseCountY","event","preventDefault","clientX","clientY","onmouseup","closeDragElement","onmousemove","elementDrag","style","offsetLeft","sign","top","offsetTop","gridComponent","cellComponent","gridClass","gridCellClass","cellItemClass","idTrait","titleTrait","privateCls","selector","getFullName","addCellTrait","type","full","text","comp","components","stringify","tl","tc","tr","cl","cr","bl","br","bc","keyWidth","minDim","step","currentUnit","cc","Css","getRule","setRule","autoTrait","changeProp","columnsTrait","placeholder","rowsTrait","columnGapTrait","rowGapTrait","minTrait","toggleTrait","Grid","visible","update","selected","clearTrait","reset","resetTrait","store","updateChildren","updateTrait","sel","grid","fill","area","getId","addStyle","generateMedia","display","deviceId","mediaCondition","defaults","icon","traits","init","pluck","padding","toolbar","attributes","class","force","resizable","st","container","render","updateRowgap","updateColumngap","onStatusChange","bm","BlockManager","labelGrid","categoryGrid","gridBlock","media","category","cm","pn","Panels","um","UndoManager","log","getPanel","undoBtn","getButton","redoBtn","saveBtn","hasUndo","hasRedo","getDirtyCount","gridEl","dimensions","gridcontainer","prepend","gridColUnits","gridRowUnits","gridCanvas","gridCanvasChildren","colunits","widthfull","widthhalf","validateunit","rowunits","row","gridsection","delegatedTouchPlaceChild","place","placeChild","gridchild","child","removeChild","cont","replaceWith","updateCols","updateCanvas","errors","getElementPos","getAttribute","includes","ev","elementFromPoint","changedTouches","startend","dataset","ceil","srow","erow","startRow","endRow","scol","ecol","startCol","endCol","childstring","panels","resizer","traitsInSm","icons","loadComponents","loadBlocks","loadPanels","cmp","Components","openTmBtn","openSm","traitsSector","traitsProps","traitStyle","hidden","removeButton","buttons","openLm","innerHTML"],"mappings":";CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAQ,2BAA6BD,IAErCD,EAAK,2BAA6BC,IARpC,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,gBCnErDtC,EAAOD,QAfP,SAAyBwC,EAAKT,EAAKN,GAYjC,OAXIM,KAAOS,EACTtB,OAAOC,eAAeqB,EAAKT,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZqB,cAAc,EACdC,UAAU,IAGZF,EAAIT,GAAON,EAGNe,GAITvC,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,gBChBxE,IAAIe,EAAiB,EAAQ,GAEzBC,EAAuB,EAAQ,GAE/BC,EAA6B,EAAQ,GAErCC,EAAkB,EAAQ,GAM9B7C,EAAOD,QAJP,SAAwB+C,EAAKvC,GAC3B,OAAOmC,EAAeI,IAAQH,EAAqBG,EAAKvC,IAAMqC,EAA2BE,EAAKvC,IAAMsC,KAItG7C,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,cCbxE,SAASoB,EAAQR,GAiBf,MAdsB,mBAAXjB,QAAoD,iBAApBA,OAAO0B,UAChDhD,EAAOD,QAAUgD,EAAU,SAAiBR,GAC1C,cAAcA,GAGhBvC,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,IAExE3B,EAAOD,QAAUgD,EAAU,SAAiBR,GAC1C,OAAOA,GAAyB,mBAAXjB,QAAyBiB,EAAIU,cAAgB3B,QAAUiB,IAAQjB,OAAOa,UAAY,gBAAkBI,GAG3HvC,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,GAGnEoB,EAAQR,GAGjBvC,EAAOD,QAAUgD,EACjB/C,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,cCjBxE3B,EAAOD,QAJP,SAAyB+C,GACvB,GAAII,MAAMC,QAAQL,GAAM,OAAOA,GAIjC9C,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,cCyBxE3B,EAAOD,QA9BP,SAA+B+C,EAAKvC,GAClC,IAAI6C,EAAY,MAAPN,EAAc,KAAyB,oBAAXxB,QAA0BwB,EAAIxB,OAAO0B,WAAaF,EAAI,cAE3F,GAAU,MAANM,EAAJ,CACA,IAIIC,EAAIC,EAJJC,EAAO,GACPC,GAAK,EACLC,GAAK,EAIT,IACE,IAAKL,EAAKA,EAAG1C,KAAKoC,KAAQU,GAAMH,EAAKD,EAAGM,QAAQC,QAC9CJ,EAAKK,KAAKP,EAAG7B,QAETjB,GAAKgD,EAAKM,SAAWtD,GAH4BiD,GAAK,IAK5D,MAAOM,GACPL,GAAK,EACLH,EAAKQ,EACL,QACA,IACON,GAAsB,MAAhBJ,EAAG,WAAmBA,EAAG,YACpC,QACA,GAAIK,EAAI,MAAMH,GAIlB,OAAOC,IAITvD,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,gBC/BxE,IAAIoC,EAAmB,EAAQ,GAW/B/D,EAAOD,QATP,SAAqCiB,EAAGgD,GACtC,GAAKhD,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAO+C,EAAiB/C,EAAGgD,GACtD,IAAIhC,EAAIf,OAAOkB,UAAU8B,SAASvD,KAAKM,GAAGkD,MAAM,GAAI,GAEpD,MADU,WAANlC,GAAkBhB,EAAEiC,cAAajB,EAAIhB,EAAEiC,YAAYnC,MAC7C,QAANkB,GAAqB,QAANA,EAAoBkB,MAAMiB,KAAKnD,GACxC,cAANgB,GAAqB,2CAA2CoC,KAAKpC,GAAW+B,EAAiB/C,EAAGgD,QAAxG,IAIFhE,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,cCFxE3B,EAAOD,QAVP,SAA2B+C,EAAKuB,IACnB,MAAPA,GAAeA,EAAMvB,EAAIe,UAAQQ,EAAMvB,EAAIe,QAE/C,IAAK,IAAItD,EAAI,EAAG+D,EAAO,IAAIpB,MAAMmB,GAAM9D,EAAI8D,EAAK9D,IAC9C+D,EAAK/D,GAAKuC,EAAIvC,GAGhB,OAAO+D,GAITtE,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,cCPxE3B,EAAOD,QAJP,WACE,MAAM,IAAIwE,UAAU,8IAItBvE,EAAOD,QAAQ,WAAaC,EAAOD,QAASC,EAAOD,QAAQ4B,YAAa,G,wDCJpE6C,EAAU,YACVC,EAAa,WACbC,EAAc,YCHH,WAACC,EAAQC,GACpB,IAWMC,EAAe,SAAfA,EAAeC,GACjB,MAAiC,SAA7BA,EAAGC,QAAQC,cACJ,8EACJH,EAAaC,EAAGG,YAAhB,uBAA8CH,EAAGC,QAAQC,eAAiBF,EAAGI,GAAK,IAAMJ,EAAGI,GAAK,IAAhG,qBAGLC,EAAIR,EAAOQ,EACXC,EAAMT,EAAOU,OAAOC,YAE1BX,EAAOY,GAAG,sBAAsB,SAAAC,GAC5B,IArB0BV,EACtBW,EAoBEC,EAAcP,EAAE,IAAD,OAAKC,EAAL,iBACpBM,EAAY7B,QAAUsB,EAAE,QAAQQ,OAAOR,EAAE,aAAD,OAAaC,EAAb,0BACzCM,EAAYE,MAvBcd,EAuBaU,EAAMK,QAtBzCJ,EAAMX,EAAGC,QAAQC,cACrBS,GAAOX,EAAGI,GAAK,IAAMJ,EAAGI,GAAK,GAC7BJ,EAAGgB,UAAUjC,QAAUiB,EAAGgB,UAAUC,MAAM,MAAMC,SAAQ,SAAAC,GACpDR,GAAe,gBAAPQ,GAAgC,gBAAPA,GACtB,uBAAPA,GAAuC,oBAAPA,GACzB,oBAAPA,EAA6B,IAAMA,EAAM,MAE1CpB,EAAaC,EAAGG,YAAhB,uBAA8CQ,EAA9C,sBAgBPC,EAAYQ,KAAK,QAAQX,GAAG,SAAS,SAASY,GAC1C,IAAMC,EAAMzB,EAAO0B,OAAOC,cAC1B3B,EAAO4B,OAAOH,EAAII,cAAcL,EAAEM,cAAcC,UAAUC,gBC3BtE,IAAIlF,EAAE,IAAIA,EAAE,CAACmF,IAAI,SAASnF,EAAEJ,GAAG,IAAIW,EAAE,GAAG,OAAOX,EAAEI,EAAEmF,KAAI,SAASnF,EAAET,GAAG,OAAOgB,EAAE6E,MAAM7F,EAAEK,EAAEX,KAAKsB,EAAEP,MAAKA,EAAEyC,SAAS4C,aAAa,SAASrF,EAAEJ,GAAG,OAAOI,EAAEJ,GAAG,EAAEI,EAAEJ,EAAE,EAAE,GAAG0F,IAAI,SAAStF,EAAEJ,GAAG,IAAIW,EAAE,GAAG,OAAOP,EAAEuF,OAAO3F,EAAE,SAASI,EAAET,EAAEmF,GAAG,OAAOnE,EAAE6E,MAAMV,EAAE1E,EAAEJ,EAAEX,KAAKsB,EAAEhB,IAAI,SAASS,EAAEJ,GAAG,OAAOI,EAAEJ,GAAG,IAAI4F,IAAI,SAAS5F,EAAEW,GAAG,OAAOkF,KAAKD,IAAIE,MAAM,KAAKnF,EAAEP,EAAEmF,IAAIvF,EAAEW,GAAGX,KAAK,IAAIA,EAAE,WAAW,IAAIA,EAAE,EAAEW,EAAE,EAAEX,EAAEL,EAAE,IAAI,SAASmF,EAAE1E,EAAEO,EAAEhB,GAAG,OAAOS,GAAG,EAAEJ,IAAIW,GAAGX,GAAGL,EAAE,SAAST,EAAEkB,GAAG,IAAIJ,EAAE,GAAGW,GAAG,EAAE,SAAShB,IAAIK,EAAE+F,KAAK3F,GAAGO,GAAG,EAAE,MAAM,CAAC4B,KAAK,SAASnC,GAAGJ,EAAEuC,KAAKnC,GAAGO,GAAG,GAAGqF,KAAK,SAAS5F,GAAG,OAAOO,GAAGhB,SAAI,IAASS,IAAIA,EAAEJ,EAAEwC,OAAO,GAAGxC,EAAEI,IAAI6F,IAAI,WAAW,OAAOtF,GAAGhB,IAAIK,EAAEiG,OAAOC,KAAK,WAAW,OAAOlG,EAAEwC,QAAQ+C,IAAI,SAASnF,GAAG,OAAOJ,EAAEuF,IAAInF,IAAI+F,MAAM,WAAW,OAAOxF,GAAGhB,IAAIK,IAAI,SAASoG,EAAEhG,EAAEJ,EAAEW,EAAEhB,EAAEmF,EAAE5F,EAAEkH,GAAGC,KAAKC,GAAGlG,EAAEiG,KAAKE,GAAGvG,EAAEqG,KAAKG,GAAG7F,EAAE0F,KAAKI,GAAG9G,EAAE0G,KAAKK,GAAG5B,EAAEuB,KAAKM,GAAGzH,EAAEmH,KAAKO,MAAMR,EAAE,SAASS,IAAIR,KAAKS,OAAO,IAAI5H,GAAE,SAASc,EAAEW,GAAG,OAAOP,EAAEqF,aAAazF,EAAE+G,KAAKC,QAAQhH,EAAE+G,KAAKE,SAAStG,EAAEoG,KAAKC,QAAQrG,EAAEoG,KAAKE,aAAY,SAAShG,EAAEjB,EAAEW,GAAG,GAAGA,EAAEqG,QAAQ,CAAC,IAAIrH,EAAEgB,EAAE4F,GAAG5F,EAAE2F,GAAG,EAAEpH,EAAEyB,EAAE8F,GAAG9F,EAAE6F,GAAG,EAAEJ,EAAEhG,EAAEwF,IAAI,CAACjG,EAAET,EAAEyB,EAAEgG,GAAGhG,EAAE+F,GAAG,IAAI,GAAG,GAAG/F,EAAEqG,QAAQ,MAAM,CAACrG,EAAEuG,QAAQ,IAAIL,EAAE5F,EAAEkG,EAAE5H,EAAE6H,EAAE,EAAEC,EAAE,GAAGlI,EAAE,GAAG,GAAGiH,GAAGzG,EAAE,IAAIkH,EAAElG,EAAE2F,GAAGO,GAAGlG,EAAE4F,GAAGM,IAAI,CAAC,IAAItH,EAAE,EAAE0B,EAAEN,EAAE6F,GAAGvF,GAAGN,EAAE8F,GAAGxF,IAAI,IAAIkG,EAAExG,EAAE+F,GAAGS,GAAGxG,EAAEgG,GAAGQ,IAAI5H,GAAGS,EAAE8E,EAAE+B,EAAE5F,EAAEkG,KAAK,EAAEE,EAAER,GAAGO,GAAG7H,OAAO,GAAG6G,GAAGlH,EAAE,IAAI2H,EAAElG,EAAE6F,GAAGK,GAAGlG,EAAE8F,GAAGI,IAAI,CAAC,IAAItH,EAAE,EAAE0B,EAAEN,EAAE2F,GAAGrF,GAAGN,EAAE4F,GAAGtF,IAAI,IAAIkG,EAAExG,EAAE+F,GAAGS,GAAGxG,EAAEgG,GAAGQ,IAAI5H,GAAGS,EAAE8E,EAAE7D,EAAE4F,EAAEM,KAAK,EAAEE,EAAER,GAAGO,GAAG7H,OAAO,IAAIsH,EAAElG,EAAE+F,GAAGG,GAAGlG,EAAEgG,GAAGE,IAAI,CAAC,IAAItH,EAAE,EAAE0B,EAAEN,EAAE2F,GAAGrF,GAAGN,EAAE4F,GAAGtF,IAAI,IAAIkG,EAAExG,EAAE6F,GAAGW,GAAGxG,EAAE8F,GAAGU,IAAI5H,GAAGS,EAAE8E,EAAE7D,EAAEkG,EAAEN,KAAK,EAAEQ,EAAER,GAAGO,GAAG7H,EAAE,OAAO8H,EAAE1C,SAAQ,SAASvE,EAAEJ,GAAGb,EAAEa,GAAGoH,EAAEhH,KAAI,SAASA,GAAG,IAAIJ,EAAEL,EAAEmF,EAAE5F,EAAEkH,EAAEnF,EAAEb,EAAE,IAAI+G,EAAE/G,EAAE,IAAIb,EAAE,EAAE,IAAIsH,EAAElG,EAAEM,GAAG4F,GAAGlG,EAAEwG,GAAGN,IAAI,GAAGQ,EAAER,GAAGO,EAAE,EAAE,CAAC,IAAItC,EAAEnE,EAAEuG,OAAOhI,EAAEyB,EAAEuG,OAAOd,GAAGpG,EAAE6G,EAAElG,EAAEM,MAAMtB,EAAEgB,EAAEwG,GAAGN,GAAGhB,KAAKyB,IAAI3G,EAAEwG,GAAG,KAAKN,EAAElH,EAAE,IAAIkG,KAAKD,IAAIjF,EAAEM,MAAM4F,EAAE,EAAE7G,EAAE,KAAKqH,EAAEjB,IAAIA,IAAI,IAAI7G,EAAEJ,EAAEiH,IAAI7G,GAAG8H,EAAEjB,EAAE,IAAI7G,EAAEJ,IAAIiH,GAAG,OAAOtB,EAAEqC,GAAGf,EAAElH,EAAE+B,GAAG6D,EAAEqC,GAAG,EAAE,CAACrC,EAAE5F,IAAnQ,CAAwQkH,GAAGzG,EAAE,IAAIyG,GAAGlH,EAAE,IAAI,MAAM,OAAOkH,EAAEtF,UAAU,CAACmG,OAAO,SAAS7G,GAAG,OAAOiG,KAAKkB,UAAUnH,IAAIiG,KAAKkB,SAASlB,KAAKE,GAAGF,KAAKC,GAAG,IAAID,KAAKI,GAAGJ,KAAKG,GAAG,IAAIH,KAAKM,GAAGN,KAAKK,GAAG,IAAIL,KAAKkB,SAASP,MAAM,SAAS5G,GAAG,IAAIJ,EAAEqG,KAAKO,MAAM,IAAIP,KAAKmB,YAAYpH,EAAE,CAAC,IAAIO,EAAEhB,EAAET,EAAEkH,EAAE,EAAE,IAAIzF,EAAE0F,KAAKC,GAAG3F,GAAG0F,KAAKE,GAAG5F,IAAI,IAAIhB,EAAE0G,KAAKG,GAAG7G,GAAG0G,KAAKI,GAAG9G,IAAI,IAAIT,EAAEmH,KAAKK,GAAGxH,GAAGmH,KAAKM,GAAGzH,IAAIkH,GAAGpG,EAAE8E,EAAEnE,EAAEhB,EAAET,KAAK,EAAEmH,KAAKoB,OAAOrB,EAAEC,KAAKmB,YAAY,EAAE,OAAOnB,KAAKoB,QAAQP,KAAK,WAAW,OAAO,IAAId,EAAEC,KAAKC,GAAGD,KAAKE,GAAGF,KAAKG,GAAGH,KAAKI,GAAGJ,KAAKK,GAAGL,KAAKM,GAAGN,KAAKO,QAAQc,IAAI,SAAStH,GAAG,IAAIO,EAAE0F,KAAKO,MAAM,IAAIP,KAAKsB,MAAMvH,EAAE,CAAC,IAAIT,EAAET,EAAEkH,EAAES,EAAE5F,EAAE,EAAEkG,EAAE,GAAG,EAAEnH,EAAET,EAAE,EAAE6H,EAAE,EAAEC,EAAE,EAAE,IAAInI,EAAEmH,KAAKC,GAAGpH,GAAGmH,KAAKE,GAAGrH,IAAI,IAAIkH,EAAEC,KAAKG,GAAGJ,GAAGC,KAAKI,GAAGL,IAAI,IAAIS,EAAER,KAAKK,GAAGG,GAAGR,KAAKM,GAAGE,IAAI5F,GAAGtB,EAAEgB,EAAEmE,EAAE5F,EAAEkH,EAAES,KAAK,EAAEtH,GAAGI,GAAGT,EAAE,IAAIiI,EAAEC,GAAGzH,GAAGyG,EAAE,IAAIe,EAAEE,GAAG1H,GAAGkH,EAAE,IAAIM,EAAEd,KAAKsB,KAAK1G,EAAE,IAAI1B,EAAE0B,MAAMmG,EAAEnG,MAAMoG,EAAEpG,IAAI,IAAIkG,GAAGd,KAAKC,GAAGD,KAAKE,GAAG,GAAG,MAAMY,GAAGd,KAAKG,GAAGH,KAAKI,GAAG,GAAG,MAAMU,GAAGd,KAAKK,GAAGL,KAAKM,GAAG,GAAG,IAAI,OAAON,KAAKsB,MAAMC,SAAS,SAASxH,GAAG,IAAIJ,EAAEI,EAAE,IAAIO,EAAE,OAAOkH,KAAKzH,EAAE,IAAIO,EAAEmH,KAAK1H,EAAE,IAAIO,EAAEX,GAAGqG,KAAKC,IAAItG,GAAGqG,KAAKE,IAAIsB,MAAMxB,KAAKG,IAAIqB,MAAMxB,KAAKI,IAAIqB,MAAMzB,KAAKK,IAAIoB,MAAMzB,KAAKM,KAAKE,EAAE/F,UAAU,CAACyB,KAAK,SAASnC,GAAGiG,KAAKS,OAAOvE,KAAK,CAACwE,KAAK3G,EAAE2H,MAAM3H,EAAEsH,SAASM,QAAQ,WAAW,OAAO3B,KAAKS,OAAOvB,KAAI,SAASnF,GAAG,OAAOA,EAAE2H,UAAS7B,KAAK,WAAW,OAAOG,KAAKS,OAAOZ,QAAQX,IAAI,SAASnF,GAAG,IAAI,IAAIJ,EAAEqG,KAAKS,OAAOnG,EAAE,EAAEA,EAAEX,EAAEkG,OAAOvF,IAAI,GAAGX,EAAEgG,KAAKrF,GAAGoG,KAAKa,SAASxH,GAAG,OAAOJ,EAAEgG,KAAKrF,GAAGoH,MAAM,OAAO1B,KAAK4B,QAAQ7H,IAAI6H,QAAQ,SAAS7H,GAAG,IAAI,IAAIJ,EAAEW,EAAEhB,EAAEmF,EAAEuB,KAAKS,OAAO5H,EAAE,EAAEA,EAAE4F,EAAEoB,OAAOhH,MAAMyB,EAAEkF,KAAKqC,KAAKrC,KAAKsC,IAAI/H,EAAE,GAAG0E,EAAEkB,KAAK9G,GAAG6I,MAAM,GAAG,GAAGlC,KAAKsC,IAAI/H,EAAE,GAAG0E,EAAEkB,KAAK9G,GAAG6I,MAAM,GAAG,GAAGlC,KAAKsC,IAAI/H,EAAE,GAAG0E,EAAEkB,KAAK9G,GAAG6I,MAAM,GAAG,KAAK/H,QAAG,IAASA,KAAKA,EAAEW,EAAEhB,EAAEmF,EAAEkB,KAAK9G,GAAG6I,OAAO,OAAOpI,GAAGyI,QAAQ,WAAW,IAAIpI,EAAEqG,KAAKS,OAAO9G,EAAE+F,MAAK,SAAS/F,EAAEW,GAAG,OAAOP,EAAEqF,aAAarF,EAAEsF,IAAI1F,EAAE+H,OAAO3H,EAAEsF,IAAI/E,EAAEoH,WAAU,IAAIpH,EAAEX,EAAE,GAAG+H,MAAMpH,EAAE,GAAG,GAAGA,EAAE,GAAG,GAAGA,EAAE,GAAG,IAAIX,EAAE,GAAG+H,MAAM,CAAC,EAAE,EAAE,IAAI,IAAIpI,EAAEK,EAAEwC,OAAO,EAAEsC,EAAE9E,EAAEL,GAAGoI,MAAMjD,EAAE,GAAG,KAAKA,EAAE,GAAG,KAAKA,EAAE,GAAG,MAAM9E,EAAEL,GAAGoI,MAAM,CAAC,IAAI,IAAI,QAAQ,CAACM,SAAS,SAASlB,EAAE5H,GAAG,IAAI4H,EAAE3E,QAAQjD,EAAE,GAAGA,EAAE,IAAI,OAAO,EAAE,IAAI6H,EAAE,SAAShH,GAAG,IAAIT,EAAET,EAAE,IAAI2C,MAAM,GAAG,EAAE7B,GAAG,OAAOI,EAAEuE,SAAQ,SAASvE,GAAGT,EAAEmF,EAAE1E,EAAE,IAAIO,EAAEP,EAAE,IAAIO,EAAEP,EAAE,IAAIO,GAAGzB,EAAES,IAAIT,EAAES,IAAI,GAAG,KAAIT,EAAnH,CAAsHiI,GAAGC,EAAEzC,SAAQ,eAAc,IAAI0C,EAAE,SAASjH,EAAEJ,GAAG,IAAIL,EAAEmF,EAAE5F,EAAE2H,EAAE,IAAI5F,EAAE,EAAEkG,EAAE,IAAI5H,EAAE,EAAE6H,EAAE,IAAIC,EAAE,EAAE,OAAOjH,EAAEuE,SAAQ,SAASvE,IAAIT,EAAES,EAAE,IAAIO,GAAGkG,EAAEA,EAAElH,EAAEA,EAAEsB,IAAIA,EAAEtB,IAAImF,EAAE1E,EAAE,IAAIO,GAAGwG,EAAEA,EAAErC,EAAEA,EAAEvF,IAAIA,EAAEuF,IAAI5F,EAAEkB,EAAE,IAAIO,GAAGyG,EAAEA,EAAElI,EAAEA,EAAEmI,IAAIA,EAAEnI,MAAK,IAAIkH,EAAES,EAAE5F,EAAEkG,EAAE5H,EAAE6H,EAAEC,EAAErH,GAA9L,CAAkMmH,EAAEC,GAAGjI,EAAE,IAAID,GAAE,SAASc,EAAEW,GAAG,OAAOP,EAAEqF,aAAazF,EAAEgH,QAAQrG,EAAEqG,YAAW,SAASsB,EAAElI,EAAEJ,GAAG,IAAI,IAAIW,EAAEmE,EAAE1E,EAAE8F,OAAOhH,EAAE,EAAEA,EAAES,GAAG,CAAC,GAAGmF,GAAG9E,EAAE,OAAO,GAAGd,IAAIS,EAAE,OAAO,IAAIgB,EAAEP,EAAE6F,OAAOe,QAAQ,CAAC,IAAIZ,EAAEnF,EAAEmG,EAAEzG,GAAGkG,EAAET,EAAE,GAAGe,EAAEf,EAAE,GAAG,IAAIS,EAAE,OAAOzG,EAAEmC,KAAKsE,GAAGM,IAAI/G,EAAEmC,KAAK4E,GAAGrC,UAAU1E,EAAEmC,KAAK5B,GAAGzB,KAAKC,EAAEoD,KAAK8E,GAAGiB,EAAEnJ,EAAE,IAAII,GAAG,IAAI,IAAIyB,EAAE,IAAI9B,GAAE,SAASc,EAAEW,GAAG,OAAOP,EAAEqF,aAAazF,EAAEgH,QAAQhH,EAAEiH,SAAStG,EAAEqG,QAAQrG,EAAEsG,aAAY9H,EAAE+G,QAAQlF,EAAEuB,KAAKpD,EAAE8G,OAAOqC,EAAEtH,EAAEzB,GAAG,IAAI,IAAIgJ,EAAE,IAAI1B,EAAE7F,EAAEkF,QAAQqC,EAAEhG,KAAKvB,EAAEiF,OAAO,OAAOsC,IAArhI,GAA4hIF,SAAS1H,EAAE,SAASP,GAAGiG,KAAKmC,OAAOC,SAASC,cAAc,UAAUrC,KAAKsC,QAAQtC,KAAKmC,OAAOI,WAAW,MAAMvC,KAAKwC,MAAMxC,KAAKmC,OAAOK,MAAMzI,EAAE0I,aAAazC,KAAK0C,OAAO1C,KAAKmC,OAAOO,OAAO3I,EAAE4I,cAAc3C,KAAKsC,QAAQM,UAAU7I,EAAE,EAAE,EAAEiG,KAAKwC,MAAMxC,KAAK0C,SAASpI,EAAEG,UAAUoI,aAAa,WAAW,OAAO7C,KAAKsC,QAAQO,aAAa,EAAE,EAAE7C,KAAKwC,MAAMxC,KAAK0C,SAAS,IAAIpJ,EAAE,aAAaA,EAAEmB,UAAUqI,SAAS,SAAS/I,EAAEJ,GAAG,YAAO,IAASA,IAAIA,EAAE,IAAIqG,KAAK+C,WAAWhJ,EAAE,EAAEJ,GAAG,IAAIL,EAAEmB,UAAUsI,WAAW,SAAShJ,EAAET,EAAEmF,GAAG,IAAI5F,EAAE,SAASkB,GAAG,IAAIJ,EAAEI,EAAEiJ,WAAW1I,EAAEP,EAAEkJ,QAAQ,QAAG,IAAStJ,GAAGuJ,OAAOC,UAAUxJ,GAAG,CAAC,GAAG,IAAIA,EAAE,MAAM,IAAIyJ,MAAM,oGAAoGzJ,EAAE6F,KAAKD,IAAI5F,EAAE,GAAGA,EAAE6F,KAAKyB,IAAItH,EAAE,SAASA,EAAE,GAAG,YAAO,IAASW,IAAI4I,OAAOC,UAAU7I,IAAIA,EAAE,KAAKA,EAAE,IAAI,CAAC0I,WAAWrJ,EAAEsJ,QAAQ3I,GAAnU,CAAuU,CAAC0I,WAAW1J,EAAE2J,QAAQxE,IAAIsB,EAAE,IAAIzF,EAAEP,GAAGyG,EAAE,SAASzG,EAAEJ,EAAEW,GAAG,IAAI,IAAIhB,EAAES,EAAE0E,EAAE,GAAG5F,EAAE,EAAEkH,OAAE,EAAOS,OAAE,EAAO5F,OAAE,EAAOkG,OAAE,EAAO5H,OAAE,EAAOL,EAAEc,EAAEd,GAAGyB,EAAEkG,EAAElH,EAAE,GAAGyG,EAAE,EAAElH,IAAI+B,EAAEtB,EAAEyG,EAAE,GAAGe,EAAExH,EAAEyG,EAAE,SAAI,KAAU7G,EAAEI,EAAEyG,EAAE,KAAK7G,GAAG,OAAOsH,EAAE,KAAK5F,EAAE,KAAKkG,EAAE,KAAKrC,EAAEvC,KAAK,CAACsE,EAAE5F,EAAEkG,KAAK,OAAOrC,EAAzM,CAA4MsB,EAAE8C,eAAeQ,KAAKtD,EAAEyC,MAAMzC,EAAE2C,OAAO7J,EAAEoK,SAASrI,EAAEjB,EAAE6G,EAAE3H,EAAEmK,YAAY,OAAOpI,EAAEA,EAAE+G,UAAU,MAAMrI,EAAEmB,UAAU6I,gBAAgB,SAASvJ,EAAEJ,EAAEW,GAAG,IAAIhB,EAAE0G,KAAKvB,EAAE2D,SAASC,cAAc,OAAO5D,EAAE8E,iBAAiB,QAAO,WAAW,IAAI1K,EAAES,EAAEyJ,WAAWtE,EAAE,EAAEnE,GAAGX,EAAEd,EAAE,GAAGkB,MAAK0E,EAAE+E,IAAIzJ,GAAGT,EAAEmB,UAAUoI,aAAa,SAAS9I,EAAEJ,GAAG,IAAIW,EAAE,IAAImJ,eAAenJ,EAAEoJ,KAAK,MAAM3J,GAAG,GAAGO,EAAEqJ,aAAa,cAAcrJ,EAAEsJ,OAAO,WAAW,GAAG,KAAK5D,KAAK6D,OAAO,CAAC,IAAI9J,EAAE,IAAI+J,WAAW9D,KAAK+D,UAAUlL,EAAEkB,EAAEoC,OAAO,IAAI,IAAI7B,EAAE,IAAIkB,MAAM3C,GAAGS,EAAE,EAAEA,EAAES,EAAEoC,OAAO7C,IAAIgB,EAAEhB,GAAG0K,OAAOC,aAAalK,EAAET,IAAI,IAAImF,EAAEnE,EAAE4J,KAAK,IAAInE,EAAEtH,OAAO0L,KAAK1F,GAAG9E,EAAE,yBAAyBoG,KAAKzF,EAAE8J,QAAQ9K,EAAEmB,UAAU4J,cAAc,SAAStK,EAAEJ,EAAEW,GAAG,IAAIhB,EAAE0G,KAAKA,KAAK6C,aAAa9I,GAAE,SAASA,GAAG,IAAI0E,EAAE2D,SAASC,cAAc,OAAO5D,EAAE8E,iBAAiB,QAAO,WAAW,IAAIxJ,EAAET,EAAEyJ,WAAWtE,EAAE,EAAEnE,GAAGX,EAAEI,EAAE,GAAGiG,SAAQvB,EAAE+E,IAAIzJ,MAAoB,QCE3uM,WAACkD,GAAsB,IAAdqH,EAAc,uDAAP,GACrBC,EAAa,IAAIC,EACfC,EAAsEH,EAAtEG,UAAWC,EAA2DJ,EAA3DI,UAAWC,EAAgDL,EAAhDK,YAAaC,EAAmCN,EAAnCM,WAAYC,EAAuBP,EAAvBO,YAAaC,EAAUR,EAAVQ,MAC9DrH,EAAIR,EAAOQ,EACXC,EAAMT,EAAOU,OAAOC,YAGpBmH,EAAO9H,EAAO+H,cACdC,EAAYF,EAAKG,QAAQ,SAASpH,MACxCiH,EAAKI,QAAQ,QAAS,CAClBrH,MAAO,CACHsH,YADG,WAECH,EAAUxK,UAAU2K,YAAY3F,MAAMO,KAAMqF,WAC5C,IAAMC,EAAKtF,KAAKtG,IAAI,WACd6L,EAAWD,EAAGE,MAAK,SAAAC,GAAI,OAAIA,EAAKC,UAAYhB,KAE7Ca,IACDD,EAAGK,QAAQ,CAAED,QAAShB,EAAWkB,MAAOf,IACxC7E,KAAK6F,IAAI,UAAWP,QAOpCrI,EAAO6I,SAASC,IAAIrB,EAAW,CAC3BsB,IAD2B,SACvBC,EAAIrL,GAAiB,WAAdsL,EAAc,uDAAJ,GACT1I,EAAOwC,KAAPxC,GAERwC,KAAK/C,OAASgJ,EACdjG,KAAKmG,OAASD,EAAQC,QAAUF,EAAGG,cACnC,IAAMC,EAAWrG,KAAKsG,iBAAiBtG,KAAKmG,OAAOhI,SACnD6B,KAAK0B,MAAL,cAAoB2E,EAAS,GAA7B,YAAmCA,EAAS,GAA5C,YAAkDA,EAAS,GAA3D,KACA,IAAME,EAAavG,KAAKwG,gBAAgBxG,KAAKmG,OAAOhI,SACpD6B,KAAK2B,QAAU3B,KAAKyG,wBAAwBF,GAC5C,IAAMG,EAAU1G,KAAK2G,cAAc3G,KAAK0B,MAAO1B,KAAK2B,SAC9CiF,EAAQjC,EACRkC,EAAMH,EAAQI,SAAS,GAC7Bb,EAAGc,MAAMrD,KAAK,CAAEkD,QAAOF,YAClBM,WAAWC,KAAK,eAAe,kBAAMhB,EAAGiB,YAAY1J,MACzDqJ,EAAIM,QAAU,kBAAM,EAAKC,cACzB9C,EAAK8C,WAAWP,IAGpBQ,KAnB2B,SAmBtBpB,GAEDA,EAAGc,MAAMO,SAGbX,cAxB2B,SAwBbjF,EAAOC,GACjB,IAAM+E,EAAUjJ,EAAE,0CACZ8J,EAAc,8BAAH,OACH7J,EADG,yFAECA,EAFD,8DAGKA,EAHL,oBAGoBA,EAHpB,6DAIQA,EAJR,yKAM8CgE,EAN9C,mHASKhE,EATL,oBASoBA,EATpB,+DAUQA,EAVR,+EAWSA,EAXT,qHAaKiE,EAAQzC,KAAI,SAAAsI,GAAG,gEAAoDA,EAApD,gBAAmEtD,KAAK,IAb5F,gJAoCjB,OAjBAwC,EAAQxI,KAAR,iCACWqJ,EADX,mDAEqB7J,EAFrB,2YAaMkH,EAbN,8CAiBO8B,EAAQhN,IAAI,IAGvB0N,WAjE2B,WAiEd,WACDjB,EAAmBnG,KAAnBmG,OAAQlJ,EAAW+C,KAAX/C,OACVwK,EAAKxK,EAAOyK,cAEjBzK,EAAOU,OAAOgK,cAAgB1K,EAAOU,OAAOgK,YAAc,CACvDhG,QAAS,KAEb,IAAIiG,EAAgB3K,EAAOU,OAAOgK,YAAYhG,QAE1CmD,EACAA,EAAMqB,KAGJyB,GAAiBA,EAAc1L,KAAK8D,KAAK2B,SAC3C2C,EAAKuD,eAAevJ,SAAQ,SAAAwJ,GAAK,OAAI,EAAKC,qBAAqBN,EAAIK,MACnE7K,EAAOiK,YAAYxC,KAU3BqD,qBA1F2B,SA0FNN,EAAIK,GACrB,IACME,EADOP,EAAGQ,cAAcH,EAAMI,QAAQC,OAC5BC,QAAQX,EAAGY,YAAYP,EAAMI,OAAQJ,EAAMtN,WAC3DiN,EAAGa,eAAeR,EAAMI,OAAQJ,EAAMtN,UACtCiN,EAAGc,YAAYT,EAAMI,OAAQJ,EAAO,CAAEE,QAS1C1B,iBAvG2B,SAuGVkC,GACb,IACI,OAAOjE,EAAWzB,SAAS0F,GAC7B,SACE,MAAO,CAAC,IAAK,IAAK,OAU1BhC,gBArH2B,SAqHXgC,GACZ,IACI,OAAOjE,EAAWxB,WAAWyF,EAAK/D,GACpC,SACE,MAAO,CAAC,CAAC,EAAG,EAAG,GAAI,CAAC,IAAK,IAAK,QAUtCgC,wBAnI2B,SAmIHrL,GAEpB,IAAMqN,EAAO,GAEb,OAHArN,EAAMA,GAAO,CAAC,CAAC,EAAG,EAAG,GAAI,CAAC,IAAK,IAAK,OAEhCkD,SAAQ,SAAAkJ,GAAG,OAAIiB,EAAKvM,KAAL,cAAiBsL,EAAI,GAArB,YAA2BA,EAAI,GAA/B,YAAqCA,EAAI,GAAzC,SACZiB,M,oiCClKZ,IAAMC,EAAqB,WAA2C,MAA1CC,EAA0C,uDAAtB,CAAC,CAAEC,KAAM,QACtDC,EAAgBF,EAAkBzJ,KAAI,SAAArG,GAAC,OAAIA,EAAE,WAC7CiQ,EAAS,CAAC,CAACD,EAAcE,UAF0C,IAG9CF,GAH8C,IAGzE,2BAA0C,KAA/BG,EAA+B,QAChCC,EAAYH,EAAOA,EAAO3M,OAAS,IACA,IAArC8M,EAAUb,QAAQY,GAClBC,EAAU/M,KAAK8M,GAEfF,EAAO5M,KAAK,CAAC8M,KARoD,8BAWzE,OAAOF,GAGEI,EAAmB,SAACJ,EAAQ7H,EAAKkI,GAA4B,IAAtBC,EAAsB,uDAAN,EAChE,OAAOD,EAAO,4BAAH,OAA+BlI,EAA/B,aAAgD6H,EACtD5J,KAAI,SAAAmK,GAAK,OAGNA,EAAMlN,SAAWiN,EAAgBC,EAAMnF,KAAK,KAA5C,iBAA6DmF,EAAMlN,OAAnE,aAA8EkN,EAAM,GAApF,QAEHnF,KAAK,MCnBC,WAACjH,GACZ,MAAO,CACHqM,MAAO,CACHH,MAAM,EACNlI,IAAK,IACLsI,QAAS,EACTC,KAAM,EACNC,UAAW,EACXC,OAAQ,EACRC,OAAQ,GACRC,OAAQ,GACRC,UAAW,IAEfC,QAAS,CACLC,YADK,SACOT,GACR,IAAMU,EAAatB,EAAmBY,EAAMK,QAC5C,OAAOT,EAAiBc,EAAYV,EAAMrI,IAAKqI,EAAMH,OAEzDc,YALK,SAKOX,GACR,IAAMU,EAAatB,EAAmBY,EAAMM,QAC5C,OAAOV,EAAiBc,EAAYV,EAAMrI,KAAK,IAEnDiJ,OATK,SASEZ,GACH,OAAO9J,KAAKD,IAAI+J,EAAMC,QAAS,GAAK/J,KAAKD,IAAI+J,EAAME,KAAM,KAGjEW,UAAW,CACPC,gBADO,SACSd,EAAOe,GACnB,GAAgB,KAAZA,EAAgB,CAChB,IAAMC,EAAc,IAAIC,gBAAgBF,GAExC,IAAK,IAAMG,KAAYlB,EAAO,CAC1B,IAAMmB,EAAeH,EAAYI,IAAIF,GAC/BG,EAAY,IAAQrB,EAAMkB,IAE5BC,GAA8B,WAAdE,EAChBrB,EAAMkB,GAAYF,EAAY5Q,IAAI8Q,GAC3BC,GAA8B,WAAdE,IACvBrB,EAAMkB,GAAYI,KAAKC,MAAMP,EAAY5Q,IAAI8Q,WAIrDM,EAAUxB,EAAMC,QAASD,EAAMK,QAC/BmB,EAAUxB,EAAME,KAAMF,EAAMM,SAGpCmB,UApBO,SAoBGzB,EAAOe,GACb,IAAIW,EAASxL,KAAKD,IAAI2D,OAAOmH,EAAQW,QAAS,GAC1CC,EAASzL,KAAKD,IAAI2D,OAAOmH,EAAQY,QAAS,GAE9C,GAAID,EAASC,EAGT,IADA,IAAIC,EAAaD,EAASD,EACjBnS,EAAI,EAAGA,GAAKqS,EAAYrS,IAC7ByQ,EAAMe,EAAQc,WAAWvL,WAI7B,IADA,IAAIsL,EAAaF,EAASC,EACjBpS,EAAI,EAAGA,GAAKqS,EAAYrS,IAC7ByQ,EAAMe,EAAQc,WAAWjP,KAAK,CAAE0M,KAAM,SAIlDwC,YArCO,SAqCK9B,EAAOe,GACff,EAAMO,UAAU3N,KAAKmO,IAEzBgB,eAxCO,SAwCQ/B,EAAOe,GAClBf,EAAMO,UAAUyB,OAAOjB,EAAS,IAEpCkB,WA3CO,SA2CIjC,EAAOe,GACdf,EAAMH,KAAOkB,GAEjBmB,UA9CO,SA8CGlC,EAAOe,GACbf,EAAMrI,IAAMoJ,GAEhBoB,cAjDO,SAiDOnC,EAAOe,GACjBf,EAAMC,QAAUc,GAEpBqB,WApDO,SAoDIpC,EAAOe,GACdf,EAAME,KAAOa,GAEjBsB,gBAvDO,SAuDSrC,EAAOe,GACnBf,EAAMG,UAAYY,GAEtBuB,aA1DO,SA0DMtC,EAAOe,GAChBf,EAAMI,OAASW,GAEnBwB,UA7DO,SA6DGvC,EAAOe,GACbf,EAAMO,UAAY,OAO5BiB,EAAY,SAACK,EAAW/P,GAC1B,IAAK,IAAIvC,EAAI,EAAGA,GAAKsS,EAAWtS,IAC5BuC,EAAIc,KAAK,CAAE0M,KAAM,SCjGV,WAAC3L,GAAsB,IAC9B6O,EACA3J,EAFgBmC,EAAc,uDAAP,GAGnB7G,EAAMR,EAANQ,EACFsO,EAAgB9O,EAAO+O,QACvBC,EAAQxO,EAAE,6TAShBR,EAAO6I,SAASC,IAAI,gBAAgB,eAEpC9I,EAAOY,GAAG,iBAAiB,WAClBiO,IAAOA,EAAQrO,EAAE,eACtBqO,EAAMI,IAAI,CACN,MAAS,GACT,WAAc,uCAElBD,EAAMzN,KAAK,kBAAkB0N,IAAI,UAAW,QAC5CD,EAAMC,IAAI,UAAW,QACrBC,YAAW,WACP,IAAMC,EAASL,EAAcrS,IAAIuD,EAAOoP,aACxCC,EAAqBF,GACrBG,EAAsBH,GACtBI,IACAP,EAAMC,IAAI,UAAW,SACrBJ,EAAMI,IAAI,aAAc,UACzB,QAGPjP,EAAOY,GAAG,eAAe,kBAAMoO,EAAMC,IAAI,UAAW,WACpDjP,EAAOY,GAAG,gBAAgB,kBAAMoO,EAAMC,IAAI,UAAW,YACrDjP,EAAO0B,OAAOb,MAAMD,GAAG,eAAe,WAC9ByG,EAAKmI,aAC2B,MAA5BxP,EAAO0B,OAAO+N,UAAmBT,EAAMC,IAAI,UAAW,SACrDD,EAAMC,IAAI,UAAW,YASlC,IAAMI,EAAuB,SAACF,GAC1B,IAAMO,EAAgBV,EAEtB,GAAIU,EAAcxQ,OAAS,EACvBwQ,EAAcC,SAAS,cACpB,CAEEd,IAAOA,EAAQrO,EAAE,eACtB,IAAMoP,EAAoBZ,EAAMa,OAAM,GAAM,GAC5ChB,EAAMiB,OAAOF,GAGjBV,YAAW,WACP1O,EAAEhF,QAAQuU,QAAQ,YACnB,MAQDT,EAAwB,SAACH,GAE3B,IACI,IAAMa,EAAgBC,SAASd,EAAO1S,IAAI,cAAe,IAErDyT,EAAc,EACdC,EAAa,EAEjBC,EAAUpB,EAAMzN,KAAK,iBAAiB9E,IAAI,GAAI,CAC1C4T,KAAM,IACN/N,IAAK0N,EACLhM,IAAKqD,EAAKiJ,cACVC,MAJ0C,WAKtCL,EAAclQ,EAAO0B,OAAO8O,aAAaC,aAE7CC,KAP0C,SAOrCC,GACD,IACSzL,IAAQA,EAAS1E,EAAE,mBACmB,IAAvC0E,EAAO3D,KAAK,gBAAgBrC,QAE5BgG,EAAOlE,OAAO,iHAIlB,IAAM4P,EAAQD,EAAQ3Q,EAAO0B,OAAOmP,YAAYC,KAAOZ,EACnD3K,EAAQ2K,EAAcU,EAAQvJ,EAAK0J,WACnCD,EAAO9Q,EAAO0B,OAAOmP,YAAYC,KACjCE,GAAM,EAEV,GAAIzL,EAAQyK,GAAiBzK,EAAQ8B,EAAKiJ,cACtCK,EAAQR,EACRa,GAAM,MACH,CAEHb,EAAaQ,EACR9B,IAAOA,EAAQrO,EAAE,eACtBqO,EAAMI,IAAI,QAAS1J,GAGnByJ,EAAMzN,KAAK,gBAAgB0N,IAAI,OAAQ6B,GAEvC,IAAIG,EAAWH,EAAO,IACtB9B,EAAMzN,KAAK,sBAAsB0N,IAAI,OAAQgC,GAC7CjC,EAAMzN,KAAK,kBAAkBN,KAAK,gBAAkBsB,KAAK2O,MAAM3L,GAAS,MACxEyJ,EAAMzN,KAAK,kBAAkB0N,IAAI,UAAW,SAIhD,OADAjP,EAAOmR,UACAH,EACT,MAAO7R,GAEL,OADAiS,QAAQC,MAAMlS,IACP,IAGfiL,KA9C0C,WA+CtC,IACI5J,EAAE,gBAAgB8Q,SAClBtR,EAAOuR,WAAW,gBACpB,MAAOpS,GACLiS,QAAQC,MAAMlS,OAI5B,MAAOA,GACLiS,QAAQC,MAAMlS,KAItBa,EAAOY,GAAG,QAAQ,WAEdJ,EAAE,kBAAkBQ,OAAOgO,GAC3BO,OAMJ,IAAMA,EAAgB,WAClB,IAAM9N,EAAM0D,SACRqM,EAAIhW,OACFiW,EAAShQ,EAAIiQ,YAAiC,eAAnBjQ,EAAIiQ,WACjCjQ,EAAIkQ,gBAAkBlQ,EAAImQ,KAE1BrM,EAAQkM,EAAMI,YACdpM,EAASgM,EAAMK,aAGfN,EAAEO,YAAcxM,EAAQiM,EAAEO,aAC1BxM,EAAQiM,EAAEO,WACVtM,EAAS+L,EAAEQ,aAKf,IAAMC,EAAmBjD,EACzB,GAAIiD,EAAiB/S,OAAS,EAAG,CAE7B,IAAMgT,EAAuBD,EAAiB1Q,KAAK,gBAC7C4Q,EAAwBF,EAAiB1Q,KAAK,iBAE9C6Q,EAAapS,EAAO0B,OAAOmP,YAAYC,KACvCuB,EAAcrS,EAAO0B,OAAOmP,YAAYC,KAAO9Q,EAAO0B,OAAO8O,aAAaC,YAEhFyB,EAAqBjD,IAAI,UAAW,SAAWmD,EAAa,iBAC5DD,EAAsBlD,IAAI,UAAW,SAAWoD,EAAc,iBAC9DJ,EAAiBK,YAAY,UAGjC,MAAO,CAAE/M,QAAOE,YAIlB2K,EAAY,SAACmC,GAAuB,IAAdlL,EAAc,uDAAP,GAC3BmL,EAAO,EACPC,EAAO,EACPC,EAAO,EACPC,EAAO,EACP1T,EAAO,EACP2T,EAAc,EACdC,EAAc,EAElBN,EAAQjM,iBAAiB,aAAa,SAAA9E,IAClCA,EAAIA,GAAKhG,OAAOsX,OACdC,iBAEFL,EAAOlR,EAAEwR,QACTL,EAAOnR,EAAEyR,QACT9N,SAAS+N,UAAYC,EACrBhO,SAASiO,YAAcC,EACvBhM,EAAKkJ,WAGT,IAAM8C,EAAc,SAAC7R,IACjBA,EAAIA,GAAKhG,OAAOsX,OACdC,iBAEFP,EAAOE,EAAOlR,EAAEwR,QAChBP,EAAOE,EAAOnR,EAAEyR,QAChBP,EAAOlR,EAAEwR,QACTL,EAAOnR,EAAEyR,QACS,MAAd5L,EAAKgJ,MAA8B,OAAdhJ,EAAKgJ,OAC1BkC,EAAQe,MAAMxC,KAAQyB,EAAQgB,WAAaf,EAAQ,KAC9CnL,EAAKqJ,KAAK6B,EAAQgB,cACfX,GACAL,EAAQe,MAAMxC,KAAQyB,EAAQgB,WAAaf,EAAQjQ,KAAKiR,KAAKhB,GAAQvT,EAAO,KAC5E2T,EAAc,IAEdL,EAAQe,MAAMxC,KAAQyB,EAAQgB,WAAaf,EAAQ,KACnDI,OAIM,MAAdvL,EAAKgJ,MAA8B,OAAdhJ,EAAKgJ,OAC1BkC,EAAQe,MAAMG,IAAOlB,EAAQmB,UAAYjB,EAAQ,KAC5CpL,EAAKqJ,KAAK6B,EAAQmB,aACfb,GACAN,EAAQe,MAAMG,IAAOlB,EAAQmB,UAAYjB,EAAQlQ,KAAKiR,KAAKf,GAAQxT,EAAO,KAC1E4T,EAAc,IAEdN,EAAQe,MAAMG,IAAOlB,EAAQmB,UAAYjB,EAAQ,KACjDI,QAMVM,EAAmB,WACrBhO,SAAS+N,UAAY,KACrB/N,SAASiO,YAAc,KACvB/L,EAAK+C,S,ikBC9OE,eAACpK,GAAsB,IAAdqH,EAAc,uDAAP,GACvBS,EAAO9H,EAAO+H,cACdtH,EAAMT,EAAOU,OAAOC,YAExBgT,EAKEtM,EALFsM,cACAC,EAIEvM,EAJFuM,cACAC,EAGExM,EAHFwM,UACAC,EAEEzM,EAFFyM,cACAC,EACE1M,EADF0M,cAGIC,EAAU,CAAE7X,KAAM,KAAMwM,MAAO,MAE/BsL,EAAa,CAAE9X,KAAM,QAASwM,MAAO,SAErCuL,EAAa,CAAC,IAAD,OAAKL,GAAL,WAAsBE,GAAtB,WAA2CD,IAC9D9T,EAAOY,GACL,gBACA,SAAAuT,GAAQ,OACND,EAAW/I,QAAQgJ,EAASC,gBAAkB,GAC9CD,EAASvL,IAAI,UAAW,MAG5B,IAAMyL,EAAe,CACnBlY,KAAM,UACNmY,KAAM,SACNC,MAAM,EACNC,KAAM,WACN/L,QAAS,SAAAzI,GACP,IAAMyU,EAAOzU,EAAOmJ,cACpBsL,GAAQA,EAAKC,aAAa5L,IAAlB,oBAAmCrI,EAAnC,sCAAiEsT,EAAjE,6BACCtT,EADD,sBACkBkN,KAAKgH,UAAU,CACvCC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,SAAU,aACVC,OAAQ,EACRC,KAAM,GACNC,YAAa,IAbP,aAeR,IAAMC,EAAKxV,EAAOyV,IAClBD,EAAGE,QAAH,WAAe3B,KAAoByB,EAAGG,QAAH,WAAe5B,GAAiB,CACjE,aAAc,OACd,YAAa,EACb,aAAc,WAKd6B,EAAY,CAChBzZ,KAAM,OACNwM,MAAO,YACP2L,KAAM,WACNuB,WAAY,GAGRC,EAAe,CACnB3Z,KAAM,UACNwM,MAAO,UACP2L,KAAM,SACNuB,WAAY,EACZE,YAAa,IACb/R,IAAK,GAGDgS,EAAY,CAChB7Z,KAAM,OACNwM,MAAO,OACP2L,KAAM,SACNuB,WAAY,EACZE,YAAa,IACb/R,IAAK,GAGDiS,EAAiB,CACrB9Z,KAAM,YACNwM,MAAO,iBACP2L,KAAM,SACNuB,WAAY,EACZE,YAAa,IACb/R,IAAK,GAGDkS,EAAc,CAClB/Z,KAAM,SACNwM,MAAO,cACP2L,KAAM,SACNuB,WAAY,EACZE,YAAa,IACb/R,IAAK,GAGDmS,EAAW,CACfha,KAAM,MACNwM,MAAO,UACP2L,KAAM,SACNuB,WAAY,EACZE,YAAa,IACb/R,IAAK,GAGDoS,EAAc,CAClBja,KAAM,SACNwM,MAAO,SACP2L,KAAM,SACNC,MAAM,EACNC,KAAM,SACN/L,QAAS,SAAAjH,GACFA,EAAE2H,cAAc1M,IAAI,UACvB+E,EAAE6U,KAAKC,SAAW9U,EAAE6U,KAAKC,QACzB9U,EAAE6U,KAAKE,OAAO/U,EAAE6U,KAAKG,SAAS/Z,IAAI,aAKlCga,EAAa,CACjBta,KAAM,QACNwM,MAAO,QACP2L,KAAM,SACNC,MAAM,EACNC,KAAM,QACN/L,QAAS,SAAAzI,GAAM,OAAIA,EAAOmJ,cAAcuL,WAAWgC,UAG/CC,EAAa,CACjBxa,KAAM,QACNwM,MAAO,SACP2L,KAAM,SACNC,MAAM,EACNC,KAAM,QACN/L,QAAS,SAAAzI,GACP,IAAM4W,EAAQ5W,EAAOqW,KAAKG,SAAS/Z,IAAI,SACvCma,EAAM1J,UAAU0B,UAAUgI,EAAMvK,OAChCrM,EAAOqW,KAAKQ,eAAeD,KAIzBE,EAAc,CAClB3a,KAAM,SACNwM,MAAO,QACP2L,KAAM,SACNC,MAAM,EACNC,KAAM,SACN/L,QAAS,SAAAzI,GAEP,IAAM+W,EAAM/W,EAAOmJ,cACnB,EAA2B4N,EAAIta,IAAI,SAA3B4P,EAAR,EAAQA,MAAOQ,EAAf,EAAeA,QACXmK,EAAO3K,EAAMH,KAAO3N,MAAM8N,EAAME,KAAOF,EAAMC,SAAS2K,OAAOhV,KAAI,SAAArG,GACnE,0BAAoB6E,EAApB,kBAAgCV,EAAhC,gBACCkH,KAAK,IACNoF,EAAMO,UAAU3K,KAAI,SAACiV,EAAMtb,GACzB,0BAAoB6E,EAApB,kBAAgCV,EAAhC,sBAAuDgX,EAAII,QAAU,OAASvb,EAA9E,gBACCqL,KAAK,IACJgI,EAAM5C,EAAMO,UAAU3K,KAAI,SAACiV,EAAMtb,GACrC,iBAAWmb,EAAII,QAAU,OAASvb,EAAlC,sBAAiDsb,EAAjD,QACCjQ,KAAK,KACP8P,EAAIrC,aAAaxV,OAAS,GAAK6X,EAAIrC,aAAagC,MAAMM,GACvDhX,EAAOoX,SAASC,EAAcpI,KAC7BjP,EAAOqW,KAAKC,SAAU,KAAWtW,EAAOqW,KAAKnV,QAAQoS,MAAMgE,QAAU,QACtEP,EAAIK,SAAS,CACX,wBAAyBvK,EAAQC,YAAYT,OAK7CgL,EAAgB,SAACpI,GACrB,IAAMsI,EAAWvX,EAAOoP,YAClBD,EAASnP,EAAO+O,QAAQtS,IAAI8a,GAClC,OAAIpI,EAAO1S,IAAI,cACb,kBAAkBuD,EAAOU,OAAO8W,eAAhC,aAAmDrI,EAAO1S,IAAI,cAA9D,uBACIwS,EADJ,aAIKA,GAGTnH,EAAKI,QAAQnI,EAAa,CACxBc,MAAO,EAAF,CACH4W,SAAU,CACRC,KAAM,iCACNC,OAAQ,CAAC3D,EAASC,EAAYI,IAEhCuD,KALK,WAMH,IAAMpC,EAAKxV,EAAOyV,IAClB1S,KAAKtG,IAAI,WAAWob,MAAM,QAAQ1M,QAAQ2I,GAAiB,GAAK/Q,KAAK4M,SAASmE,GAC9E0B,EAAGE,QAAH,WAAe5B,KAAoB0B,EAAGG,QAAH,WAAe7B,GAAiB,CACjEwD,QAAS,OACT,kBAAmB,aACnB,cAAe,UACfQ,QAAS,UAGVlE,KAIP,IAAMmE,EAAU,CAAC,CACfC,WAAY,CAAEC,MAAO,eACrBxP,QAAS,SAAAjH,GACFA,EAAE2H,cAAc1M,IAAI,UACvB+E,EAAE6U,KAAKC,SAAW9U,EAAE6U,KAAKC,QACzB9U,EAAE6U,KAAKE,OAAO/U,EAAE6U,KAAKG,SAAS/Z,IAAI,aAGrC,CACDub,WAAY,CAAEC,MAAO,kBACrBxP,QAAS,SAAAjH,GAAC,OAAIA,EAAE+P,WAAW,sBAAuB,CAAE2G,MAAO,MAC1D,CACDF,WAAY,CACVC,MAAO,oCACP7H,WAAW,GAEb3H,QAAS,YACR,CACDuP,WAAY,CAAEC,MAAO,eACrBxP,QAAS,aACR,CACDuP,WAAY,CAAEC,MAAO,iBACrBxP,QAAS,eAGXX,EAAKI,QAAQpI,EAAY,CACvBe,MAAO,EAAF,CACH4W,SAAU,CAERC,KAAM,8BACNK,UACAJ,OAAQ,CACN3D,EACAC,EACA2B,EACAO,EACAL,EACAE,EACAC,EACAC,EACAE,EACAO,EACAF,EACAK,GAEFqB,UAAW,CACTvD,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJG,OAAQ,GAEVrR,IAAK,IACLkI,MAAM,GAER0L,KAhCK,WAiCH,IAAMpC,EAAKxV,EAAOyV,IACZ2C,EAAKxB,EAAMvP,GACjB+Q,EAAGlL,UAAUC,gBAAgBiL,EAAG/L,MAAO,IACvCtJ,KAAK6F,IAAI,OAAQwP,EAAG/L,MAAME,MAC1BxJ,KAAK6F,IAAI,UAAWwP,EAAG/L,MAAMC,SAC7BvJ,KAAK6F,IAAI,SAAUwP,EAAG/L,MAAMI,QAC5B1J,KAAK6F,IAAI,YAAawP,EAAG/L,MAAMG,WAC/BzJ,KAAK6F,IAAI,QAASwP,GAClBrV,KAAKqU,SAAS,CACZ,qBAAsBgB,EAAGvL,QAAQG,YAAYoL,EAAG/L,OAChD,wBAAyB+L,EAAGvL,QAAQC,YAAYsL,EAAG/L,SAErDtJ,KAAKtG,IAAI,WAAWob,MAAM,QAAQ1M,QAAQ0I,GAAa,GAAK9Q,KAAK4M,SAASkE,GAC1E2B,EAAGE,QAAH,WAAe7B,KAAgB2B,EAAGG,QAAH,WAAe9B,GAAa,CACzDyD,QAAS,OACTQ,QAAS,OACTrS,OAAQ,MACRF,MAAO,SAEJvF,EAAOqW,KAAKgC,WAAcrY,EAAOqW,KAAKlW,IAAIH,EAAOqW,KAAKiC,OAAZ,WAAuB7X,EAAvB,SAAmC2X,GAClFpY,EAAOqW,KAAKE,OAAO6B,GACnBrV,KAAKnC,GAAG,cAAemC,KAAKuL,YAC5BvL,KAAKnC,GAAG,cAAemC,KAAK0L,YAC5B1L,KAAKnC,GAAG,iBAAkBmC,KAAKyL,eAC/BzL,KAAKnC,GAAG,gBAAiBmC,KAAKwV,cAC9BxV,KAAKnC,GAAG,mBAAoBmC,KAAKyV,iBACjCzV,KAAKnC,GAAG,aAAcmC,KAAKwL,WAC3BxL,KAAKnC,GAAG,gBAAiBmC,KAAK0V,iBAEhChK,WA9DK,WA+DH,IAAMlC,EAAO0D,SAASlN,KAAKtG,IAAI,SACzBma,EAAQ7T,KAAKtG,IAAI,SACjB2Q,EAAU,CACdW,OAAQxB,EACRyB,OAAQ4I,EAAMvK,MAAME,KACpB2B,UAAW,UAEb0I,EAAM1J,UAAUuB,WAAWmI,EAAMvK,MAAOE,GACxCqK,EAAM1J,UAAUY,UAAU8I,EAAMvK,MAAOe,GACvCpN,EAAOqW,KAAKE,OAAOK,GACnB7T,KAAKqU,SAAS,CACZ,qBAAsBR,EAAM/J,QAAQG,YAAY4J,EAAMvK,UAG1DmC,cA7EK,WA8EH,IAAMlC,EAAU2D,SAASlN,KAAKtG,IAAI,YAC5Bma,EAAQ7T,KAAKtG,IAAI,SACjB2Q,EAAU,CACdW,OAAQzB,EACR0B,OAAQ4I,EAAMvK,MAAMC,QACpB4B,UAAW,UAEb0I,EAAM1J,UAAUsB,cAAcoI,EAAMvK,MAAOC,GAC3CsK,EAAM1J,UAAUY,UAAU8I,EAAMvK,MAAOe,GACvCpN,EAAOqW,KAAKE,OAAOK,GACnB7T,KAAKqU,SAAS,CACZ,wBAAyBR,EAAM/J,QAAQC,YAAY8J,EAAMvK,UAG7DkM,aA5FK,WA6FH,IAAM9L,EAAS1J,KAAKtG,IAAI,UAClBma,EAAQ7T,KAAKtG,IAAI,SACvBma,EAAM1J,UAAUyB,aAAaiI,EAAMvK,MAAO4D,SAASxD,IACnDzM,EAAOqW,KAAKQ,eAAeD,GAC3B7T,KAAKqU,SAAS,CAAE,yBAAmB3K,EAAnB,SAElB+L,gBAnGK,WAoGH,IAAMhM,EAAYzJ,KAAKtG,IAAI,aACrBma,EAAQ7T,KAAKtG,IAAI,SACvBma,EAAM1J,UAAUwB,gBAAgBkI,EAAMvK,MAAO4D,SAASzD,IACtDxM,EAAOqW,KAAKQ,eAAeD,GAC3B7T,KAAKqU,SAAS,CAAE,4BAAsB5K,EAAtB,SAElB+B,UA1GK,WA2GH,IAAMvK,EAAMiM,SAASlN,KAAKtG,IAAI,QACxBma,EAAQ7T,KAAKtG,IAAI,SACvBma,EAAM1J,UAAUqB,UAAUqI,EAAMvK,MAAOrI,IAEzCsK,WA/GK,WAgHH,IAAMpC,IAASnJ,KAAKtG,IAAI,QAClBma,EAAQ7T,KAAKtG,IAAI,SACvBma,EAAM1J,UAAUoB,WAAWsI,EAAMvK,MAAOH,GACpCA,KAAOlM,EAAOqW,KAAKC,SAAU,KAAWtW,EAAOqW,KAAKnV,QAAQoS,MAAMgE,QAAU,UAElFmB,eArHK,WAuHY,aADA1V,KAAKtG,IAAI,UACGuD,EAAOqW,KAAKzU,OAAO5B,EAAOmJ,gBAC/CnJ,EAAOqW,KAAKC,SAAU,KAAWtW,EAAOqW,KAAKnV,QAAQoS,MAAMgE,QAAU,UAE1E3D,M,ikBC9VM,eAAC3T,GAAsB,IAAdqH,EAAc,uDAAP,GACvBqR,EAAK1Y,EAAO2Y,aACVC,EAAuCvR,EAAvCuR,UAAWC,EAA4BxR,EAA5BwR,aAAcC,EAAczR,EAAdyR,UAEjCA,GAAaJ,EAAG5P,IAAIhJ,EAAP,GACX6I,MAAOiQ,EACPG,MAAO,0gBACPC,SAAUH,EACVpP,QAAS,CAAE6K,KAAMxU,IACdgZ,KCTQ,WAAC9Y,EAAQC,GACpB,IAAMgZ,EAAKjZ,EAAO6I,SACZqQ,EAAKlZ,EAAOmZ,OACZC,EAAKpZ,EAAOqZ,YACZ5Y,EAAMT,EAAOU,OAAOC,YAE1BsY,EAAGnQ,IAAIjJ,GAAS,SAAA2B,GACZxB,EAAO4W,OAAM,SAAA5F,GAAG,OAAII,QAAQkI,IAAI,kBAGlBJ,EAAGK,SAAS,WACpB9c,IAAI,WAAWqM,IAAI,CAAC,CAC1BvI,GAAI,OACJY,UAAW,aACX6W,WAAY,CAAErO,MAAO,QACrBlB,QAAS,SAAAjH,GAAC,OAAIA,EAAE+P,WAAW,eAC5B,CACChR,GAAI,OACJY,UAAW,eACX6W,WAAY,CAAErO,MAAO,QACrBlB,QAAS,SAAAjH,GAAC,OAAIA,EAAE+P,WAAW,eAC5B,CACChR,GAAIV,EACJsB,UAAW,iBACX6W,WAAY,CAAErO,MAAO,QACrBlB,QAAS,SAAAjH,GAAC,OAAIA,EAAE+P,WAAW1R,OAG/B,IAAM2Z,EAAUN,EAAGO,UAAU,UAAW,QAClCC,EAAUR,EAAGO,UAAU,UAAW,QAClCE,EAAUT,EAAGO,UAAU,UAAW5Z,GAExCG,EAAOY,GAAG,oBAAoB,WAC1BwY,EAAGQ,UAAYJ,EAAQ5Q,IAAI,YAAZ,UAA4BnI,EAA5B,yBAAyD+Y,EAAQ5Q,IAAI,YAAa,cACjGwQ,EAAGS,UAAYH,EAAQ9Q,IAAI,YAAZ,UAA4BnI,EAA5B,2BAA2DiZ,EAAQ9Q,IAAI,YAAa,gBACnG5I,EAAO8Z,gBAAkB,EAAIH,EAAQ/Q,IAAI,YAAZ,UAA4BnI,EAA5B,8BAA8DkZ,EAAQ/Q,IAAI,YAAa,sB,gBCnC7G,WAAC5I,GAAsB,IAC1BQ,EAAMR,EAANQ,EACFC,EAAMT,EAAOU,OAAOC,YAE1B,MAAO,CACHoZ,OADG,SACInD,GACH,MAA+B7T,KAAKiX,aAA5BzU,EAAR,EAAQA,MAAOE,EAAf,EAAeA,OAAQgO,EAAvB,EAAuBA,IACjBtT,EAAKK,EAAE,aAAD,OAAaC,EAAb,uCAA6CsC,KAAKuT,QAAU,QAAU,OAAtE,kBAAsF/Q,EAAQ,EAA9F,qBAA4GE,EAAS,EAArH,4CACGhF,EADH,iEAINwZ,EAAgB9Z,EAAGoB,KAAH,WAAYd,EAAZ,kBAKtB,OAJAN,EAAG+Z,QAAQnX,KAAKoX,aAAavD,EAAOrR,EAAOE,EAAQgO,IACnDtT,EAAG+Z,QAAQnX,KAAKqX,aAAaxD,IAC7BqD,EAAcjZ,OAAO+B,KAAKsX,WAAWzD,IACrCqD,EAAcjZ,OAAO+B,KAAKuX,mBAAmB1D,IACtCzW,GAEXga,aAdG,SAcUvD,EAAOrR,EAAOE,EAAQgO,GAAK,WAC9B8G,EAAW/Z,EAAE,2CAAD,OACC+E,EAAQ,EADT,kBACoBkO,EAAM,GAAKhO,GAAU,GADzC,oCACuEmR,EAAM/J,QAAQC,YAAY8J,EAAMvK,OADvG,sEAEIuK,EAAMvK,MAAMG,UAAY,KAF5B,yBAEiDoK,EAAMvK,MAAMI,OAAS,KAFtE,uCAGLhM,EAHK,8DAKRmW,EAAMvK,MAAMK,OAAOzK,KAAI,SAACsI,EAAK3O,GAAN,gCAA8BA,EAA9B,gFAEZ2O,EAAIoB,KAFQ,kDAGT/P,EAHS,+FAKZgb,EAAMvK,MAAMC,QAAU,EAAI,EAAKkO,UAAY,EAAKC,UALpC,0IAQhBxT,KAAK,IAbJ,iCAmBlB,OAHkBsT,EAAShZ,KAAK,SACtBX,GAAG,UAAU,SAAAY,GAAC,OAAI,EAAKkZ,aAAalZ,MAEvC+Y,GAEXH,aApCG,SAoCUxD,GAAO,WACV+D,EAAWna,EAAE,mFAAD,OACyCoW,EAAM/J,QAAQG,YAAY4J,EAAMvK,OADzE,kDAEQuK,EAAMvK,MAAMG,UAAY,KAFhC,yBAEqDoK,EAAMvK,MAAMI,OAAS,KAF1E,uCAGLhM,EAHK,8DAKRmW,EAAMvK,MAAMM,OAAO1K,KAAI,SAAC2Y,EAAKhf,GAAN,gCAA8BA,EAA9B,gFAEZgf,EAAIjP,KAFQ,kDAGT/P,EAHS,+FAKZ,EAAK4e,UALO,uIAQhBvT,KAAK,IAbJ,iCAmBlB,OAHkB0T,EAASpZ,KAAK,SACtBX,GAAG,UAAU,SAAAY,GAAC,OAAI,EAAKkZ,aAAalZ,MAEvCmZ,GAEXN,WA1DG,SA0DQzD,GAAO,WACRiE,EAAcra,EAAE,qCAAD,OACRC,EADQ,gBACGA,EADH,uEAEcmW,EAAM/J,QAAQC,YAAY8J,EAAMvK,OAF9C,+BAE2EuK,EAAM/J,QAAQG,YAAY4J,EAAMvK,OAF3G,kDAGKuK,EAAMvK,MAAMG,UAAY,KAH7B,yBAGkDoK,EAAMvK,MAAMI,OAAS,KAHvE,kDAKflO,MAAMqY,EAAM/J,QAAQI,OAAO2J,EAAMvK,QAAQ4K,OAAOhV,KAAI,SAACuG,EAAM5M,GAAP,qDACtCA,EADsC,8CAEtCA,EAFsC,wDAI7CqL,KAAK,IATG,6BAWrB4T,EAAYja,GAAG,gBAAgB,SAAAY,GAC3BA,EAAEuR,iBACF,EAAK+H,yBAAyBtZ,MAElCqZ,EAAYja,GAAG,cAAc,SAAAY,GACzBA,EAAEuR,iBACF,EAAK+H,yBAAyBtZ,MAElC,IAAMuZ,EAAQF,EAAYtZ,KAAK,OAI/B,OAHAwZ,EAAMna,GAAG,aAAa,SAAAY,GAAC,OAAI,EAAKwZ,WAAWxZ,EAAG,QAC9CuZ,EAAMna,GAAG,WAAW,SAAAY,GAAC,OAAI,EAAKwZ,WAAWxZ,EAAG,QAErCqZ,GAEXP,mBApFG,SAoFgB1D,GAAO,WAChBqE,EAAYza,EAAE,qCAAD,OACNC,EADM,gBACKA,EADL,sEAEgBmW,EAAM/J,QAAQC,YAAY8J,EAAMvK,OAFhD,+BAE6EuK,EAAM/J,QAAQG,YAAY4J,EAAMvK,OAF7G,mDAGOuK,EAAMvK,MAAMG,UAAY,KAH/B,yBAGoDoK,EAAMvK,MAAMI,OAAS,KAHzE,kDAKbmK,EAAMvK,MAAMO,UAAU3K,KAAI,SAACiZ,EAAOtf,GAAR,uDACVA,EADU,sDAEJsf,EAFI,6EAIJtf,EAJI,kDAKnBqL,KAAK,IAVC,6BAenB,OAHYgU,EAAU1Z,KAAK,UACvBX,GAAG,SAAS,SAAAY,GAAC,OAAI,EAAK2Z,YAAY3Z,MAE/ByZ,GAEX3C,OAtGG,SAsGI8C,EAAMxE,GACJ7T,KAAK5C,KACN4C,KAAK5C,GAAK4C,KAAKgX,OAAOnD,GACtB7T,KAAKsV,UAAY7X,EAAE4a,GACnBrY,KAAKsV,UAAUrX,OAAO+B,KAAK5C,IAC3BH,EAAOY,GAAG,0DAA0D,WAChE,IAAMwX,EAAKpY,EAAOmJ,cAAc1M,IAAI,SACpC2b,GAAMpY,EAAOqW,KAAKC,SAAWtW,EAAOqW,KAAKE,OAAO6B,QAI5DlX,MAjHG,WAkHC,OAAO6B,KAAK5C,GAAG1D,IAAI,IAEvBmF,OApHG,SAoHI4U,GACHzT,KAAKyT,SAAWA,GAEpBD,OAvHG,SAuHIK,GACH7T,KAAK5C,GAAK4C,KAAKgX,OAAOnD,GACtBpW,EAAE,IAAD,OAAKC,EAAL,cAAqB4a,YAAYtY,KAAK5C,KAE3CsO,WA3HG,SA2HQmI,GACPpW,EAAE,IAAD,OAAKC,EAAL,aAAoB4a,YAAYtY,KAAKqX,aAAaxD,KAEvD0E,WA9HG,SA8HQ1E,GACP,MAA+B7T,KAAKiX,aAA5BzU,EAAR,EAAQA,MAAOE,EAAf,EAAeA,OAAQgO,EAAvB,EAAuBA,IACvBjT,EAAE,IAAD,OAAKC,EAAL,aAAoB4a,YAAYtY,KAAKqX,aAAaxD,EAAOrR,EAAOE,EAAQgO,KAE7E8H,aAlIG,SAkIU3E,GACTpW,EAAE,IAAD,OAAKC,EAAL,eAAsB4a,YAAYtY,KAAKsX,WAAWzD,KAEvDC,eArIG,SAqIYD,GACXpW,EAAE,IAAD,OAAKC,EAAL,cAAqB4a,YAAYtY,KAAKuX,mBAAmB1D,KAE9DsE,MAAO,GACPV,UAAW,GAAF,OAAK/Z,EAAL,aACTga,UAAW,GAAF,OAAKha,EAAL,aACT+a,OAAQ,CAAEjR,IAAK,GAAIqQ,IAAK,IACxBtE,SAAS,EACT0D,WA7IG,WA8IC,OAAQjX,KAAKyT,UAAYxW,EAAO0B,OAAO+Z,cAAc1Y,KAAKyT,SAAStV,UAAa,CAC5EqE,MAAO,IACPE,OAAQ,MAGhBiV,aAnJG,SAmJUlZ,GACT,IAAMmK,EAAOnK,EAAE0H,OAAOrM,MAChBjB,EAAI4F,EAAE0H,OAAOwS,aAAa,YAC1BxN,EAAY1M,EAAE0H,OAAOwS,aAAa,kBAoBxC,GAlBI,MAAMjc,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,KAAKlM,KAAKkM,IACV,MAAMlM,KAAKkM,IACX,OAAOlM,KAAKkM,IACZ,MAAMlM,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,QAAQlM,KAAKkM,IACb,KAAKlM,KAAKkM,IACV,MAAMlM,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,MAAMlM,KAAKkM,IACX,SAASlM,KAAKkM,IAAS,CAAC,OAAQ,cAAe,eAAegQ,SAAShQ,IAChD,IAAvBsE,SAAStE,EAAM,IAGZ,CACH,IAAMiL,EAAQ7T,KAAKyT,SAAS/Z,IAAI,SAChCsG,KAAKyY,OAAOtN,GAAWG,OAAOtL,KAAKyY,OAAOtN,GAAW/C,QAAQvP,GAAI,GAC/C,QAAdsS,GACA0I,EAAMvK,MAAMK,OAAO9Q,GAAG+P,KAAOA,EAC7B5I,KAAKyT,SAASY,SAAS,CACnB,wBAAyBR,EAAM/J,QAAQC,YAAY8J,EAAMvK,WAG7DuK,EAAMvK,MAAMM,OAAO/Q,GAAG+P,KAAOA,EAC7B5I,KAAKyT,SAASY,SAAS,CACnB,qBAAsBR,EAAM/J,QAAQG,YAAY4J,EAAMvK,UAG9DtJ,KAAKwT,OAAOK,QAfZ7T,KAAKyY,OAAOtN,GAAWjP,KAAKrD,IAkBpCkf,yBA7LG,SA6LsBc,GACrB,IAAM1S,EAAS/D,SAAS0W,iBACpBD,EAAGE,eAAe,GAAG9I,QACrB4I,EAAGE,eAAe,GAAG7I,SAEnB8I,EAAuB,eAAZH,EAAGtH,KAAwB,IAAM,IAClDvR,KAAKiY,WAAW9R,EAAO8S,QAAQzb,GAAIwb,IAEvCf,WArMG,SAqMQY,EAAIG,GACX,IAAMnF,EAAQ7T,KAAKyT,SAAS/Z,IAAI,SAC1B+L,EAAOyH,SAAS2L,EAAG1S,OAAOwS,aAAa,aAAe,EAM5D,GAJA3Y,KAAKmY,MAAL,UAAca,EAAd,QAA+BxZ,KAAK0Z,KAAKzT,EAAOoO,EAAMvK,MAAMC,SAC5DvJ,KAAKmY,MAAL,UAAca,EAAd,QACIvT,GAAQzF,KAAKmY,MAAL,UAAca,EAAd,QAA+B,GAAKnF,EAAMvK,MAAMC,QAE3C,MAAbyP,EAAkB,CAElB,MACIhZ,KAAKmY,MAAMgB,MAAQnZ,KAAKmY,MAAMiB,KAAO,CAACpZ,KAAKmY,MAAMgB,KAAMnZ,KAAKmY,MAAMiB,MAAQ,CAACpZ,KAAKmY,MAAMiB,KAAMpZ,KAAKmY,MAAMgB,MAD3G,WAAKE,EAAL,KAAeC,EAAf,KAEA,EACItZ,KAAKmY,MAAMoB,MAAQvZ,KAAKmY,MAAMqB,KAAO,CAACxZ,KAAKmY,MAAMoB,KAAMvZ,KAAKmY,MAAMqB,MAAQ,CAACxZ,KAAKmY,MAAMqB,KAAMxZ,KAAKmY,MAAMoB,MAD3G,WAAKE,EAAL,KAAeC,EAAf,KAEIC,EAAc,GAAH,OAAMN,EAAN,cAAoBI,EAApB,cAAkCH,EAC7C,EADW,cACJI,EAAS,GACpB7F,EAAM1J,UAAUiB,YAAYyI,EAAMvK,MAAOqQ,GAE7C3Z,KAAK8T,eAAeD,IAExBuE,YAzNG,SAyNSS,GACR,IAAMhF,EAAQ7T,KAAKyT,SAAS/Z,IAAI,SAC1ByF,EAAQ0Z,EAAG1S,OAAOwS,aAAa,YACrC9E,EAAM1J,UAAUkB,eAAewI,EAAMvK,MAAOnK,GAC5Ca,KAAK8T,eAAeD,M,ikBC7NjB,sBAAC5W,GAAsB,IAAdqH,EAAc,uDAAP,GACvB4B,EAAU,OACX,CAED0T,OAAQ,EAERC,QAAS,EAET7b,YAAa,EAEb6X,UAAW,OAEXC,aAAc,QAEdC,UAAW,GAEXnF,cAAe,GAEfC,cAAe,GAEfC,UAAW,OAEXC,cAAe,YAEfC,cAAe,YAEftM,UAAW,cAEXC,YAAa,gBAEbC,WAAY,MAEZC,YAAa,oCAKbC,MAAO,EAGPsC,WAAY,aAEZ3C,UAAW,EAEXoD,eAAgB,CAAC,CACfK,OAAQ,aACR9O,KAAM,QACNoB,SAAU,QACV+W,KAAM,QACNmD,SAAU,SACT,CACDxM,OAAQ,cACR9O,KAAM,mBACNoB,SAAU,mBACV+W,KAAM,UAGRhE,cAAe,IAEfS,WAAY,EAEZvB,WAAY,EAEZqN,WAAY,EAEZC,MAAO,CAAC,CACNxI,KAAM,OACNoD,KAAM,+BAER,CACEpD,KAAM,UACNoD,KAAM,+BAER,CACEpD,KAAM,cACNoD,KAAM,8BAER,CACEpD,KAAM,SACNoD,KAAM,qCAER,CACEpD,KAAM,UACNoD,KAAM,sCAER,CACEpD,KAAM,OACNoD,KAAM,kCAER,CACEpD,KAAM,WACNoD,KAAM,kCAER,CACEpD,KAAM,SACNoD,KAAM,gCAER,CACEpD,KAAM,MACNoD,KAAM,kCAER,CACEpD,KAAM,UACNoD,KAAM,sCAER,CACEpD,KAAM,OACNoD,KAAM,8BAER,CACEpD,KAAM,SACNoD,KAAM,yCAER,CACEpD,KAAM,QACNoD,KAAM,oCAER,CACEpD,KAAM,SACNoD,KAAM,gCAER,CACEpD,KAAM,QACNoD,KAAM,sCAER,CACEpD,KAAM,QACNoD,KAAM,sCAER,CACEpD,KAAM,MACNoD,KAAM,oCAER,CACEpD,KAAM,OACNoD,KAAM,oCAER,CACEpD,KAAM,QACNoD,KAAM,+BAER,CACEpD,KAAM,QACNoD,KAAM,gCAER,CACEpD,KAAM,QACNoD,KAAM,8BAER,CACEpD,KAAM,QACNoD,KAAM,gCAER,CACEpD,KAAM,SACNoD,KAAM,oCAER,CACEpD,KAAM,MACNoD,KAAM,+BAER,CACEpD,KAAM,QACNoD,KAAM,6BAER,CACEpD,KAAM,WACNoD,KAAM,wCAER,CACEpD,KAAM,WACNoD,KAAM,oCAER,CACEpD,KAAM,SACNoD,KAAM,6CAER,CACEpD,KAAM,QACNoD,KAAM,sCAER,CACEpD,KAAM,OACNoD,KAAM,wCAER,CACEpD,KAAM,MACNoD,KAAM,iCAER,CACEpD,KAAM,SACNoD,KAAM,iCAER,CACEpD,KAAM,MACNoD,KAAM,wCAER,CACEpD,KAAM,SACNoD,KAAM,mCAER,CACEpD,KAAM,mBACNoD,KAAM,sCAER,CACEpD,KAAM,cACNoD,KAAM,8BAER,CACEpD,KAAM,cACNoD,KAAM,8BAER,CACEpD,KAAM,cACNoD,KAAM,8BAER,CACEpD,KAAM,OACNoD,KAAM,iCAER,CACEpD,KAAM,YACNoD,KAAM,iCAER,CACEpD,KAAM,SACNoD,KAAM,gCAER,CACEpD,KAAM,UACNoD,KAAM,mCAER,CACEpD,KAAM,OACNoD,KAAM,kCAER,CACEpD,KAAM,MACNoD,KAAM,0CAER,CACEpD,KAAM,gBACNoD,KAAM,sCAER,CACEpD,KAAM,cACNoD,KAAM,sCAER,CACEpD,KAAM,cACNoD,KAAM,iCAER,CACEpD,KAAM,aACNoD,KAAM,yCAER,CACEpD,KAAM,cACNoD,KAAM,2CAER,CACEpD,KAAM,aACNoD,KAAM,uCAER,CACEpD,KAAM,YACNoD,KAAM,6CAER,CACEpD,KAAM,YACNoD,KAAM,8CAER,CACEpD,KAAM,QACNoD,KAAM,qCAER,CACEpD,KAAM,UACNoD,KAAM,iCAIPrQ,GAIL0V,EAAe/c,EAAQiJ,GAEvB+T,EAAWhd,EAAQiJ,GAEnBA,EAAQ0T,QAAUM,EAAWjd,GAE7BiJ,EAAQlI,aAAeA,EAAYf,GAEnC0E,EAAQ1E,EAAQiJ,GAEhBA,EAAQ2T,SAAWA,EAAQ5c,EAAQiJ,GAEnCjJ,EAAOqW,KAAOW,EAAKhX,EAAQiJ,GAE3BjJ,EAAOY,GAAG,QAAQ,WAChB,IAAMJ,EAAIR,EAAOQ,EACX0Y,EAAKlZ,EAAOmZ,OACZ1Y,EAAMT,EAAOU,OAAOC,YACpBuc,EAAMld,EAAOmd,WAGnBlU,EAAQ6T,MAAMzb,SAAQ,SAAAqW,GACpB,IACEwF,EAAIjV,QAAQyP,EAAKpD,MAAMzT,MAAMrD,UAAUia,SAASC,KAAOA,EAAKA,KAC5D,MAAOrG,QAIX,IAAM+L,EAAYlE,EAAGO,UAAU,QAAS,WACxC2D,GAAaA,EAAUxU,IAAI,SAAU,GACrC,IAAMyU,EAASnE,EAAGO,UAAU,QAAS,WAIrC,GAHA4D,GAAUA,EAAOzU,IAAI,SAAU,GAG3BK,EAAQ4T,WAAY,CACtB,IAAIS,EAAe9c,EAAE,gBAAD,OAAgBC,EAAhB,sDACNA,EADM,yGAENA,EAFM,0DAGd8c,EAAcD,EAAa/b,KAAb,WAAsBd,EAAtB,kBACpB8c,EAAYvc,OAAOR,EAAE,IAAD,OAAKC,EAAL,gBACpBD,EAAE,IAAD,OAAKC,EAAL,eAAsBqP,OAAOwN,GAC9BA,EAAa/b,KAAb,WAAsBd,EAAtB,aAAqCG,GAAG,SAAS,WAC/C,IAAI4c,EAAaD,EAAY9gB,IAAI,GAAG6W,MAChCmK,EAA+B,QAAtBD,EAAWlG,QAEtBkG,EAAWlG,QADTmG,EACmB,QAEA,UAGzBvE,EAAGwE,aAAa,QAAS,WACzBld,EAAE,IAAD,OAAKC,EAAL,qBAAqBA,EAArB,WAAkCwO,IAAI,QAAvC,UAAmD,IAAMiK,EAAGK,SAAS,SAASoE,QAAQze,OAAtF,MAIF,IAAM0e,EAAS1E,EAAGO,UAAU,QAAS,eACrCmE,GAAUA,EAAOhV,IAAI,SAAU,GAC/BpI,EAAE,IAAD,OAAKC,EAAL,eAAsB,GAAGod,UAAY,mCACtCR,GAAUA,EAAOzU,IAAI,SAAU","file":"grapesjs-plugin-toolbox.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-plugin-toolbox\"] = factory();\n\telse\n\t\troot[\"grapesjs-plugin-toolbox\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export const\n    cmdSave = 'save-page',\n    gridCompId = 'css-grid',\n    gridChildId = 'grid-cell';","export default (editor, config) => {\n    const generateQuerySelector = el => {\n        let str = el.tagName.toLowerCase();\n        str += el.id ? '#' + el.id : '';\n        el.className.length && el.className.split(/\\s/).forEach(cls => {\n            str += (cls != 'gjs-selected' && cls != 'cke_editable' &&\n                cls != 'cke_editable_inline' && cls != 'cke_contents_ltr' &&\n                cls != 'cke_show_borders') ? '.' + cls : '';\n        });\n        return generateTree(el.parentNode) + `<li><a><span>${str}</span></a></li>`;\n    };\n\n    const generateTree = el => {\n        if (el.tagName.toLowerCase() === 'html')\n            return `<li><a><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html</span></a></li>`; //?link href to components\n        return generateTree(el.parentNode) + `<li><a><span>${el.tagName.toLowerCase() + (el.id ? '#' + el.id : '')}</span></a></li>`;\n    };\n\n    const $ = editor.$;\n    const pfx = editor.Config.stylePrefix;\n\n    editor.on('component:selected', model => {\n        const breadcrumbs = $(`#${pfx}breadcrumbs`);\n        !breadcrumbs.length && $('body').append($(`<div id=\"${pfx}breadcrumbs\"></div>`));\n        breadcrumbs.html(generateQuerySelector(model.getEl()));\n        breadcrumbs.find('span').on('click', function(e) {\n            const doc = editor.Canvas.getDocument();\n            editor.select(doc.querySelector(e.currentTarget.innerText.trim()));\n        });\n    });\n}","if(!t)var t={map:function(t,r){var n={};return r?t.map(function(t,o){return n.index=o,r.call(n,t)}):t.slice()},naturalOrder:function(t,r){return t<r?-1:t>r?1:0},sum:function(t,r){var n={};return t.reduce(r?function(t,o,e){return n.index=e,t+r.call(n,o)}:function(t,r){return t+r},0)},max:function(r,n){return Math.max.apply(null,n?t.map(r,n):r)}};var r=function(){var r=5,n=8-r,o=1e3;function e(t,n,o){return(t<<2*r)+(n<<r)+o}function i(t){var r=[],n=!1;function o(){r.sort(t),n=!0}return{push:function(t){r.push(t),n=!1},peek:function(t){return n||o(),void 0===t&&(t=r.length-1),r[t]},pop:function(){return n||o(),r.pop()},size:function(){return r.length},map:function(t){return r.map(t)},debug:function(){return n||o(),r}}}function u(t,r,n,o,e,i,u){this.r1=t,this.r2=r,this.g1=n,this.g2=o,this.b1=e,this.b2=i,this.histo=u}function a(){this.vboxes=new i(function(r,n){return t.naturalOrder(r.vbox.count()*r.vbox.volume(),n.vbox.count()*n.vbox.volume())})}function s(r,n){if(n.count()){var o=n.r2-n.r1+1,i=n.g2-n.g1+1,u=t.max([o,i,n.b2-n.b1+1]);if(1==n.count())return[n.copy()];var a,s,h,c,f=0,v=[],l=[];if(u==o)for(a=n.r1;a<=n.r2;a++){for(c=0,s=n.g1;s<=n.g2;s++)for(h=n.b1;h<=n.b2;h++)c+=r[e(a,s,h)]||0;v[a]=f+=c}else if(u==i)for(a=n.g1;a<=n.g2;a++){for(c=0,s=n.r1;s<=n.r2;s++)for(h=n.b1;h<=n.b2;h++)c+=r[e(s,a,h)]||0;v[a]=f+=c}else for(a=n.b1;a<=n.b2;a++){for(c=0,s=n.r1;s<=n.r2;s++)for(h=n.g1;h<=n.g2;h++)c+=r[e(s,h,a)]||0;v[a]=f+=c}return v.forEach(function(t,r){l[r]=f-t}),function(t){var r,o,e,i,u,s=t+\"1\",h=t+\"2\",c=0;for(a=n[s];a<=n[h];a++)if(v[a]>f/2){for(e=n.copy(),i=n.copy(),u=(r=a-n[s])<=(o=n[h]-a)?Math.min(n[h]-1,~~(a+o/2)):Math.max(n[s],~~(a-1-r/2));!v[u];)u++;for(c=l[u];!c&&v[u-1];)c=l[--u];return e[h]=u,i[s]=e[h]+1,[e,i]}}(u==o?\"r\":u==i?\"g\":\"b\")}}return u.prototype={volume:function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var r=this.histo;if(!this._count_set||t){var n,o,i,u=0;for(n=this.r1;n<=this.r2;n++)for(o=this.g1;o<=this.g2;o++)for(i=this.b1;i<=this.b2;i++)u+=r[e(n,o,i)]||0;this._count=u,this._count_set=!0}return this._count},copy:function(){return new u(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(t){var n=this.histo;if(!this._avg||t){var o,i,u,a,s=0,h=1<<8-r,c=0,f=0,v=0;for(i=this.r1;i<=this.r2;i++)for(u=this.g1;u<=this.g2;u++)for(a=this.b1;a<=this.b2;a++)s+=o=n[e(i,u,a)]||0,c+=o*(i+.5)*h,f+=o*(u+.5)*h,v+=o*(a+.5)*h;this._avg=s?[~~(c/s),~~(f/s),~~(v/s)]:[~~(h*(this.r1+this.r2+1)/2),~~(h*(this.g1+this.g2+1)/2),~~(h*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(t){var r=t[0]>>n;return gval=t[1]>>n,bval=t[2]>>n,r>=this.r1&&r<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},a.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var r=this.vboxes,n=0;n<r.size();n++)if(r.peek(n).vbox.contains(t))return r.peek(n).color;return this.nearest(t)},nearest:function(t){for(var r,n,o,e=this.vboxes,i=0;i<e.size();i++)((n=Math.sqrt(Math.pow(t[0]-e.peek(i).color[0],2)+Math.pow(t[1]-e.peek(i).color[1],2)+Math.pow(t[2]-e.peek(i).color[2],2)))<r||void 0===r)&&(r=n,o=e.peek(i).color);return o},forcebw:function(){var r=this.vboxes;r.sort(function(r,n){return t.naturalOrder(t.sum(r.color),t.sum(n.color))});var n=r[0].color;n[0]<5&&n[1]<5&&n[2]<5&&(r[0].color=[0,0,0]);var o=r.length-1,e=r[o].color;e[0]>251&&e[1]>251&&e[2]>251&&(r[o].color=[255,255,255])}},{quantize:function(h,c){if(!h.length||c<2||c>256)return!1;var f=function(t){var o,i=new Array(1<<3*r);return t.forEach(function(t){o=e(t[0]>>n,t[1]>>n,t[2]>>n),i[o]=(i[o]||0)+1}),i}(h);f.forEach(function(){});var v=function(t,r){var o,e,i,a=1e6,s=0,h=1e6,c=0,f=1e6,v=0;return t.forEach(function(t){(o=t[0]>>n)<a?a=o:o>s&&(s=o),(e=t[1]>>n)<h?h=e:e>c&&(c=e),(i=t[2]>>n)<f?f=i:i>v&&(v=i)}),new u(a,s,h,c,f,v,r)}(h,f),l=new i(function(r,n){return t.naturalOrder(r.count(),n.count())});function g(t,r){for(var n,e=t.size(),i=0;i<o;){if(e>=r)return;if(i++>o)return;if((n=t.pop()).count()){var u=s(f,n),a=u[0],h=u[1];if(!a)return;t.push(a),h&&(t.push(h),e++)}else t.push(n),i++}}l.push(v),g(l,.75*c);for(var p=new i(function(r,n){return t.naturalOrder(r.count()*r.volume(),n.count()*n.volume())});l.size();)p.push(l.pop());g(p,c);for(var b=new a;p.size();)b.push(p.pop());return b}}}().quantize,n=function(t){this.canvas=document.createElement(\"canvas\"),this.context=this.canvas.getContext(\"2d\"),this.width=this.canvas.width=t.naturalWidth,this.height=this.canvas.height=t.naturalHeight,this.context.drawImage(t,0,0,this.width,this.height)};n.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var o=function(){};o.prototype.getColor=function(t,r){return void 0===r&&(r=10),this.getPalette(t,5,r)[0]},o.prototype.getPalette=function(t,o,e){var i=function(t){var r=t.colorCount,n=t.quality;if(void 0!==r&&Number.isInteger(r)){if(1===r)throw new Error(\"colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()\");r=Math.max(r,2),r=Math.min(r,20)}else r=10;return(void 0===n||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:r,quality:n}}({colorCount:o,quality:e}),u=new n(t),a=function(t,r,n){for(var o=t,e=[],i=0,u=void 0,a=void 0,s=void 0,h=void 0,c=void 0;i<r;i+=n)a=o[0+(u=4*i)],s=o[u+1],h=o[u+2],(void 0===(c=o[u+3])||c>=125)&&(a>250&&s>250&&h>250||e.push([a,s,h]));return e}(u.getImageData().data,u.width*u.height,i.quality),s=r(a,i.colorCount);return s?s.palette():null},o.prototype.getColorFromUrl=function(t,r,n){var o=this,e=document.createElement(\"img\");e.addEventListener(\"load\",function(){var i=o.getPalette(e,5,n);r(i[0],t)}),e.src=t},o.prototype.getImageData=function(t,r){var n=new XMLHttpRequest;n.open(\"GET\",t,!0),n.responseType=\"arraybuffer\",n.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);i=t.length;for(var n=new Array(i),o=0;o<t.length;o++)n[o]=String.fromCharCode(t[o]);var e=n.join(\"\"),u=window.btoa(e);r(\"data:image/png;base64,\"+u)}},n.send()},o.prototype.getColorAsync=function(t,r,n){var o=this;this.getImageData(t,function(t){var e=document.createElement(\"img\");e.addEventListener(\"load\",function(){var t=o.getPalette(e,5,n);r(t[0],this)}),e.src=t})};export default o;\n","import ColorThief from '../../node_modules/colorthief/dist/color-thief.mjs';\n\nexport default (editor, opts = {}) => {\n    const colorthief = new ColorThief();\n    const { colorsNum, commandId, labelColors, labelApply, paletteIcon, onAdd } = opts;\n    const $ = editor.$;\n    const pfx = editor.Config.stylePrefix;\n\n    // Update image component toolbar\n    const domc = editor.DomComponents;\n    const typeImage = domc.getType('image').model;\n    domc.addType('image', {\n        model: {\n            initToolbar() {\n                typeImage.prototype.initToolbar.apply(this, arguments);\n                const tb = this.get('toolbar');\n                const tbExists = tb.some(item => item.command === commandId);\n\n                if (!tbExists) {\n                    tb.unshift({ command: commandId, label: paletteIcon });\n                    this.set('toolbar', tb);\n                }\n            }\n        }\n    });\n\n    // Add the palette add command\n    editor.Commands.add(commandId, {\n        run(ed, s, options = {}) {\n            const { id } = this;\n\n            this.editor = ed;\n            this.target = options.target || ed.getSelected();\n            const colorArr = this.getDominantColor(this.target.getEl());\n            this.color = `rgb(${colorArr[0]},${colorArr[1]},${colorArr[2]})`;\n            const paletteArr = this.getPaletteArray(this.target.getEl());\n            this.palette = this.generateColorsFromArray(paletteArr);\n            const content = this.createContent(this.color, this.palette);\n            const title = labelColors;\n            const btn = content.children[1];\n            ed.Modal.open({ title, content })\n                .getModel().once('change:open', () => ed.stopCommand(id));\n            btn.onclick = () => this.addPalette();\n            opts.addPalette(btn);\n        },\n\n        stop(ed) {\n            //clear modal\n            ed.Modal.close();\n        },\n\n        createContent(color, palette) {\n            const content = $('<div style=\"position:relative;\"></div>');\n            const colorOutput = `\n            <div class=\"${pfx}color-thief-output\" style=\"display: block;\">\n                <div class=\"${pfx}output-layout\">\n                    <div class=\"${pfx}function ${pfx}get-color\">\n                        <h3 class=\"${pfx}function-title\">Dominant</h3>\n                        <div class=\"swatches\">\n                            <div class=\"swatch\" style=\"background-color: ${color}\"></div>\n                        </div>\n                    </div>\n                    <div class=\"${pfx}function ${pfx}get-palette\">\n                        <h3 class=\"${pfx}function-title\">Palette</h3>\n                        <div class=\"${pfx}function-output\">\n                            <div class=\"swatches\">\n                                ${palette.map(col => `<div class=\"swatch\" style=\"background-color: ${col}\"></div>`).join('')}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>`\n            content.html(`\n                <div>${colorOutput}</div>\n                <button class=\"${pfx}palette__apply-btn\" style=\"\n                position: absolute;\n                top: 0; right: 0;\n                margin: 10px;\n                background-color: #fff;\n                font-size: 1rem;\n                border-radius: 3px;\n                border: none;\n                padding: 10px 20px;\n                cursor: pointer\n                \">\n                ${labelApply}\n                </botton>\n            `);\n\n            return content.get(0);\n        },\n\n        addPalette() {\n            const { target, editor } = this;\n            const sm = editor.StyleManager;\n\n            !editor.Config.colorPicker && (editor.Config.colorPicker = {\n                palette: []\n            });\n            let pickerPalette = editor.Config.colorPicker.palette;\n\n            if (onAdd) {\n                onAdd(target);\n            } else {\n                //add to colorpicker palette\n                !(pickerPalette && pickerPalette.push(this.palette));\n                opts.refreshPalette.forEach(input => this.refreshPickerPalette(sm, input));\n                editor.stopCommand(commandId);\n            }\n        },\n\n        /**\n         * Refresh an input field i.e color so that the palette updates\n         * @param {Object} sm StyleManager reference\n         * @param {Object} input Info about input to refresh\n         * @returns void\n         */\n        refreshPickerPalette(sm, input) {\n            const coll = sm.getProperties(input.sector).models;\n            const at = coll.indexOf(sm.getProperty(input.sector, input.property));\n            sm.removeProperty(input.sector, input.property)\n            sm.addProperty(input.sector, input, { at });\n        },\n\n        /**\n         * Return rgb values for dominant color\n         * @param {HTMLElement} img image element\n         * @returns {Array} [Number, Number, Number]\n         * @private\n         */\n        getDominantColor(img) {\n            try {\n                return colorthief.getColor(img);\n            } catch {\n                return [255, 255, 255];\n            }\n        },\n\n        /**\n         * Returns array rgb values for color palette\n         * @param {HTMLElement} img image element\n         * @returns {Array} [[Number, Number, Number], ...]\n         * @private\n         */\n        getPaletteArray(img) {\n            try {\n                return colorthief.getPalette(img, colorsNum);\n            } catch {\n                return [[0, 0, 0], [255, 255, 255]];\n            }\n        },\n\n        /**\n         * convert palette values to colors\n         * @param {Array} arr [[Number, Number, Number], ...]\n         * @returns {Array} ['rgb(Number,Number,Number)', ...]\n         * @private\n         */\n        generateColorsFromArray(arr) {\n            arr = arr || [[0, 0, 0], [255, 255, 255]];\n            const cols = [];\n            arr.forEach(col => cols.push(`rgb(${col[0]},${col[1]},${col[2]})`));\n            return cols;\n        }\n    });\n}","export const groupRepeatedUnits = (templateUnitArray = [{ unit: \"1fr\" }]) => {\n    const templateArray = templateUnitArray.map(i => i[\"unit\"]);\n    const groups = [[templateArray.shift()]];\n    for (const templateUnit of templateArray) {\n        const lastGroup = groups[groups.length - 1];\n        if (lastGroup.indexOf(templateUnit) !== -1) {\n            lastGroup.push(templateUnit);\n        } else {\n            groups.push([templateUnit]);\n        }\n    }\n    return groups;\n};\n\nexport const createRepetition = (groups, min, auto, maxRepetition = 1) => {\n    return auto ? `repeat(auto-fill, minmax(${min}px, 1fr))` : groups\n        .map(group =>\n            // If you want to add repetition only when a measure is repeated more than x times,\n            // change maxRepetition value to x\n            group.length === maxRepetition ? group.join(\" \") : `repeat(${group.length}, ${group[0]})`\n        )\n        .join(\" \");\n};","import { groupRepeatedUnits, createRepetition } from '../utils/repetition';\n\nexport default (editor, opts = {}) => {\n    return {\n        state: {\n            auto: false,\n            min: 200,\n            columns: 5,\n            rows: 5,\n            columngap: 0,\n            rowgap: 0,\n            colArr: [],\n            rowArr: [],\n            childarea: []\n        },\n        getters: {\n            colTemplate(state) {\n                const unitGroups = groupRepeatedUnits(state.colArr);\n                return createRepetition(unitGroups, state.min, state.auto);\n            },\n            rowTemplate(state) {\n                const unitGroups = groupRepeatedUnits(state.rowArr);\n                return createRepetition(unitGroups, state.min, false);\n            },\n            divNum(state) {\n                return Math.max(state.columns, 0) * Math.max(state.rows, 0);\n            }\n        },\n        mutations: {\n            initialArrIndex(state, payload) {\n                if (payload !== '') {\n                    const queryParams = new URLSearchParams(payload);\n\n                    for (const stateKey in state) {\n                        const paramIsValid = queryParams.has(stateKey);\n                        const paramType = typeof (state[stateKey]);\n\n                        if (paramIsValid && paramType === 'number') {\n                            state[stateKey] = queryParams.get(stateKey);\n                        } else if (paramIsValid && paramType === 'object') {\n                            state[stateKey] = JSON.parse(queryParams.get(stateKey));\n                        }\n                    }\n                } else {\n                    createArr(state.columns, state.colArr);\n                    createArr(state.rows, state.rowArr);\n                }\n            },\n            adjustArr(state, payload) {\n                let newVal = Math.max(Number(payload.newVal), 0),\n                    oldVal = Math.max(Number(payload.oldVal), 0);\n\n                if (newVal < oldVal) {\n                    // you'd think that .length would be quicker here, but it doesn't trigger the getter/computed in colTemplate etc.\n                    let difference = oldVal - newVal;\n                    for (let i = 1; i <= difference; i++) {\n                        state[payload.direction].pop();\n                    }\n                } else {\n                    let difference = newVal - oldVal;\n                    for (let i = 1; i <= difference; i++) {\n                        state[payload.direction].push({ unit: \"1fr\" });\n                    }\n                }\n            },\n            addChildren(state, payload) {\n                state.childarea.push(payload);\n            },\n            removeChildren(state, payload) {\n                state.childarea.splice(payload, 1);\n            },\n            updateAuto(state, payload) {\n                state.auto = payload;\n            },\n            updateMin(state, payload) {\n                state.min = payload;\n            },\n            updateColumns(state, payload) {\n                state.columns = payload;\n            },\n            updateRows(state, payload) {\n                state.rows = payload;\n            },\n            updateColumnGap(state, payload) {\n                state.columngap = payload;\n            },\n            updateRowGap(state, payload) {\n                state.rowgap = payload;\n            },\n            resetGrid(state, payload) {\n                state.childarea = [];\n            }\n        }\n    }\n};\n\n//we start off with just a few rows and columns filled with 1fr units\nconst createArr = (direction, arr) => {\n    for (let i = 1; i <= direction; i++) {\n        arr.push({ unit: \"1fr\" });\n    }\n};","// Adated from https://github.com/artf/grapesjs/issues/1368\n\nexport default (editor, opts = {}) => {\n    let frame;\n    let canvas;\n    const { $ } = editor;\n    const deviceManager = editor.Devices;\n    const hints = $(`<div class=\"iframe-handle-container hidden\">\n        <div class=\"handle right-handle\">\n            <div class=\"gutter-handle\"></div>\n            <div class=\"tab-handle\"></div>\n            <div class=\"dim-indicator\"></div>\n        </div>\n        <div class=\"handle left-handle\"></div>\n    </div>`);\n\n    editor.Commands.add('smoothresize', () => { });\n\n    editor.on('change:device', () => {\n        if (!frame) frame = $('.gjs-frame');\n        frame.css({\n            'width': '',\n            'transition': 'width 0.35s ease,height 0.35s ease'\n        });\n        hints.find('.dim-indicator').css('display', 'none');\n        hints.css('display', 'none');\n        setTimeout(() => {\n            const device = deviceManager.get(editor.getDevice());\n            showDeviceResolution(device);\n            initDeviceEventHandle(device);\n            getWindowDims();\n            hints.css('display', 'block')\n            frame.css('transition', 'none');\n        }, 800);\n    });\n\n    editor.on('run:preview', () => hints.css('display', 'none'));\n    editor.on('stop:preview', () => hints.css('display', 'block'));\n    editor.Canvas.model.on('change:zoom', () => {\n        if (opts.hideOnZoom) {\n            if (editor.Canvas.getZoom() === 100) hints.css('display', 'block');\n            else hints.css('display', 'none');\n        }\n    });\n\n    /**\n     * This function will receive a screen type and it will prompt the description on the left side of the canvas.\n     *\n     * @param device\n     */\n    const showDeviceResolution = (device) => {\n        const glutterResize = hints;\n\n        if (glutterResize.length > 0) {\n            glutterResize.addClass('hidden');\n        } else {\n            // If the div is not created yet inside the iframe then we include it.\n            if (!frame) frame = $('.gjs-frame');\n            const copyGlutterResize = hints.clone(true, true);\n            frame.before(copyGlutterResize);\n        }\n        // We force to refresh the screen because then we will update all dimensions\n        setTimeout(function () {\n            $(window).trigger('resize');\n        }, 600);\n    };\n\n\n    /**\n     * This function initializes device glutter handle\n     *\n     */\n    const initDeviceEventHandle = (device) => {\n\n        try {\n            const maxDeviceSize = parseInt(device.get('widthMedia'), 10);\n\n            let widthIframe = 0; // Current iframe Width\n            let maxLeftPos = 0;\n\n            draggable(hints.find('.right-handle').get(0), {\n                axis: 'x',\n                max: maxDeviceSize,\n                min: opts.minScreenSize,\n                start() {\n                    widthIframe = editor.Canvas.getFrameEl().offsetWidth;\n                },\n                drag(uleft) {\n                    try {\n                        if (!canvas) canvas = $('.gjs-cv-canvas');\n                        if (canvas.find('.handle-mask').length === 0) {\n                            // We need to create a mask to avoid in the moment that we are dragging to move the pointer over the iframe and losing then the control of the resizing.\n                            canvas.append('<div class=\"handle-mask\" style=\"position: absolute; z-index: 2; left: 0; top: 0; right: 0; bottom: 0;\"></div>');\n                        }\n\n                        // We need to change the iframe width dynamically\n                        const total = uleft - editor.Canvas.getOffset().left - widthIframe;\n                        let width = widthIframe + total * opts.dragDampen;\n                        let left = editor.Canvas.getOffset().left;\n                        let res = true;\n\n                        if (width > maxDeviceSize || width < opts.minScreenSize) {\n                            uleft = maxLeftPos;\n                            res = false;\n                        } else {\n                            // Set the iframe width\n                            maxLeftPos = uleft;\n                            if (!frame) frame = $('.gjs-frame');\n                            frame.css('width', width);\n\n                            // Set the position left of the left handle\n                            hints.find('.left-handle').css('left', left);\n\n                            let leftDesc = left - 162; // 162 = the right panel width\n                            hints.find('.device-resolution').css('left', leftDesc);\n                            hints.find('.dim-indicator').html('Screen size  ' + Math.round(width) + 'px');\n                            hints.find('.dim-indicator').css('display', 'block');\n                        }\n                        // After dragging we need to refresh the editor to re-calculate the highlight border in the element selected.\n                        editor.refresh();\n                        return res\n                    } catch (err) {\n                        console.error(err);\n                        return false;\n                    }\n                },\n                stop() {\n                    try {\n                        $('.handle-mask').remove();\n                        editor.runCommand('smoothresize');\n                    } catch (err) {\n                        console.error(err);\n                    }\n                }\n            });\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    editor.on('load', function () {\n        // Control that the screen size is not too small\n        $('.gjs-cv-canvas').append(hints);\n        getWindowDims();\n    });\n\n    /**\n     * Function to determine Viewport Size\n     */\n    const getWindowDims = () => {\n        const doc = document,\n            w = window;\n        const docEl = (doc.compatMode && doc.compatMode === 'CSS1Compat') ?\n            doc.documentElement : doc.body;\n\n        let width = docEl.clientWidth;\n        let height = docEl.clientHeight;\n\n        // mobile zoomed in?\n        if (w.innerWidth && width > w.innerWidth) {\n            width = w.innerWidth;\n            height = w.innerHeight;\n        }\n\n        // IMPORTANT!!!!\n        // Glutter Handle information\n        const glutterHandleObj = hints;\n        if (glutterHandleObj.length > 0) {\n\n            const leftGlutterHandleBar = glutterHandleObj.find('.left-handle');\n            const rightGlutterHandleBar = glutterHandleObj.find('.right-handle');\n\n            const leftOffset = editor.Canvas.getOffset().left;\n            const rightOffset = editor.Canvas.getOffset().left + editor.Canvas.getFrameEl().offsetWidth;\n\n            leftGlutterHandleBar.css('cssText', 'left: ' + leftOffset + 'px !important');\n            rightGlutterHandleBar.css('cssText', 'left: ' + rightOffset + 'px !important');\n            glutterHandleObj.removeClass('hidden');\n        }\n\n        return { width, height };\n    };\n}\n\nconst draggable = (element, opts = {}) => {\n    let pos1 = 0,\n        pos2 = 0,\n        pos3 = 0,\n        pos4 = 0,\n        push = 5,\n        falseCountX = 0,\n        falseCountY = 0;\n\n    element.addEventListener('mousedown', e => {\n        e = e || window.event;\n        e.preventDefault();\n\n        pos3 = e.clientX;\n        pos4 = e.clientY;\n        document.onmouseup = closeDragElement;\n        document.onmousemove = elementDrag;\n        opts.start();\n    });\n\n    const elementDrag = (e) => {\n        e = e || window.event;\n        e.preventDefault();\n\n        pos1 = pos3 - e.clientX;\n        pos2 = pos4 - e.clientY;\n        pos3 = e.clientX;\n        pos4 = e.clientY;\n        if (opts.axis === 'x' || opts.axis === 'xy') {\n            element.style.left = (element.offsetLeft - pos1) + 'px';\n            if (!opts.drag(element.offsetLeft)) {\n                if (falseCountX) {\n                    element.style.left = (element.offsetLeft + pos1) + Math.sign(pos1) * push + 'px';\n                    falseCountX = 0;\n                } else {\n                    element.style.left = (element.offsetLeft + pos1) + 'px'\n                    falseCountX++;\n                }\n            };\n        }\n        if (opts.axis === 'y' || opts.axis === 'xy') {\n            element.style.top = (element.offsetTop - pos2) + 'px';\n            if (!opts.drag(element.offsetTop)) {\n                if (falseCountY) {\n                    element.style.top = (element.offsetTop + pos2) + Math.sign(pos2) * push + 'px';\n                    falseCountY = 0\n                } else {\n                    element.style.top = (element.offsetTop + pos2) + 'px';\n                    falseCountY++;\n                }\n            };\n        }\n    }\n\n    const closeDragElement = () => {\n        document.onmouseup = null;\n        document.onmousemove = null;\n        opts.stop();\n    }\n}","import { gridCompId, gridChildId } from './consts';\nimport { store } from './utils';\n\nexport default (editor, opts = {}) => {\n  const domc = editor.DomComponents;\n  const pfx = editor.Config.stylePrefix;\n  const {\n    gridComponent,\n    cellComponent,\n    gridClass,\n    gridCellClass,\n    cellItemClass\n  } = opts;\n\n  const idTrait = { name: 'id', label: 'Id' };\n\n  const titleTrait = { name: 'title', label: 'Title' };\n\n  const privateCls = [`.${gridClass}`, `.${cellItemClass}`, `.${gridCellClass}`];\n  editor.on(\n    'selector:add',\n    selector =>\n      privateCls.indexOf(selector.getFullName()) >= 0 &&\n      selector.set('private', 1)\n  );\n\n  const addCellTrait = {\n    name: 'addCell',\n    type: 'button',\n    full: true,\n    text: 'Add Cell',\n    command: editor => {\n      const comp = editor.getSelected();\n      comp && comp.components().add(`<div data-${pfx}name=\"cell-item\" class=\"${cellItemClass}\" \n        data-${pfx}resizable='${JSON.stringify({\n        tl: 0,\n        tc: 0,\n        tr: 0,\n        cl: 0,\n        cr: 1,\n        bl: 0,\n        br: 0,\n        bc: 0,\n        keyWidth: 'flex-basis',\n        minDim: 1,\n        step: 0.2,\n        currentUnit: 1\n      })}'></div>`);\n      const cc = editor.Css;\n      cc.getRule(`.${cellItemClass}`) || cc.setRule(`.${cellItemClass}`, {\n        'min-height': '75px',\n        'flex-grow': 1,\n        'flex-basis': '100%'\n      });\n    }\n  }\n\n  const autoTrait = {\n    name: 'auto',\n    label: 'Auto Fill',\n    type: 'checkbox',\n    changeProp: 1,\n  }\n\n  const columnsTrait = {\n    name: 'columns',\n    label: 'Columns',\n    type: 'number',\n    changeProp: 1,\n    placeholder: '6',\n    min: 1,\n  }\n\n  const rowsTrait = {\n    name: 'rows',\n    label: 'Rows',\n    type: 'number',\n    changeProp: 1,\n    placeholder: '6',\n    min: 1,\n  }\n\n  const columnGapTrait = {\n    name: 'columngap',\n    label: 'Column Gap(px)',\n    type: 'number',\n    changeProp: 1,\n    placeholder: '0',\n    min: 0,\n  }\n\n  const rowGapTrait = {\n    name: 'rowgap',\n    label: 'Row Gap(px)',\n    type: 'number',\n    changeProp: 1,\n    placeholder: '0',\n    min: 0,\n  }\n\n  const minTrait = {\n    name: 'min',\n    label: 'Min(px)',\n    type: 'number',\n    changeProp: 1,\n    placeholder: '0',\n    min: 1,\n  }\n\n  const toggleTrait = {\n    name: 'toggle',\n    label: 'Guides',\n    type: 'button',\n    full: true,\n    text: 'Toggle',\n    command: e => {\n      if (!e.getSelected().get('auto')) {\n        e.Grid.visible = !e.Grid.visible;\n        e.Grid.update(e.Grid.selected.get('store'));\n      }\n    }\n  }\n\n  const clearTrait = {\n    name: 'clear',\n    label: 'Cells',\n    type: 'button',\n    full: true,\n    text: 'Clear',\n    command: editor => editor.getSelected().components.reset()\n  }\n\n  const resetTrait = {\n    name: 'reset',\n    label: 'Guides',\n    type: 'button',\n    full: true,\n    text: 'Reset',\n    command: editor => {\n      const store = editor.Grid.selected.get('store');\n      store.mutations.resetGrid(store.state);\n      editor.Grid.updateChildren(store);\n    }\n  }\n\n  const updateTrait = {\n    name: 'update',\n    label: 'Cells',\n    type: 'button',\n    full: true,\n    text: 'Update',\n    command: editor => {\n      //Generate html and css\n      const sel = editor.getSelected();\n      const { state, getters } = sel.get('store');\n      let grid = state.auto ? Array(state.rows * state.columns).fill().map(i => {\n        return `<div data-${pfx}type=\"${gridChildId}\"></div>`\n      }).join(\"\") :\n        state.childarea.map((area, i) => {\n          return `<div data-${pfx}type=\"${gridChildId}\" class=\"${sel.getId() + '-div' + i}\"></div>`\n        }).join(\"\");\n      const css = state.childarea.map((area, i) => {\n        return `.${sel.getId() + '-div' + i}{grid-area:${area}}`\n      }).join(\"\");\n      !sel.components().length > 0 && sel.components().reset(grid);\n      editor.addStyle(generateMedia(css));\n      (editor.Grid.visible = false) || (editor.Grid.getEl().style.display = 'none');\n      sel.addStyle({\n        'grid-template-columns': getters.colTemplate(state)\n      });\n    }\n  }\n\n  const generateMedia = (css) => {\n    const deviceId = editor.getDevice();\n    const device = editor.Devices.get(deviceId);\n    if (device.get('widthMedia')) {\n      return `@media (${editor.Config.mediaCondition}: ${device.get('widthMedia')}){\n        ${css}\n      }`\n    }\n    return css;\n  }\n\n  domc.addType(gridChildId, {\n    model: {\n      defaults: {\n        icon: '<i class=\"fa fa-square-o\"></i>',\n        traits: [idTrait, titleTrait, addCellTrait],\n      },\n      init() {\n        const cc = editor.Css;\n        this.get('classes').pluck('name').indexOf(gridCellClass) < 0 && this.addClass(gridCellClass);\n        cc.getRule(`.${gridCellClass}`) || cc.setRule(`.${gridCellClass}`, {\n          display: 'flex',\n          'justify-content': 'flex-start',\n          'align-items': 'stretch',\n          padding: '5px'\n        });\n      },\n      ...cellComponent\n    }\n  });\n\n  const toolbar = [{\n    attributes: { class: 'fa fa-table' },\n    command: e => {\n      if (!e.getSelected().get('auto')) {\n        e.Grid.visible = !e.Grid.visible;\n        e.Grid.update(e.Grid.selected.get('store'));\n      }\n    }\n  }, {\n    attributes: { class: 'fa fa-arrow-up' },\n    command: e => e.runCommand('core:component-exit', { force: 1 })\n  }, {\n    attributes: {\n      class: 'fa fa-arrows gjs-no-touch-actions',\n      draggable: true\n    },\n    command: 'tlb-move'\n  }, {\n    attributes: { class: 'fa fa-clone' },\n    command: 'tlb-clone'\n  }, {\n    attributes: { class: 'fa fa-trash-o' },\n    command: 'tlb-delete'\n  }]\n\n  domc.addType(gridCompId, {\n    model: {\n      defaults: {\n        // Default props\n        icon: '<i class=\"fa fa-table\"></i>',\n        toolbar,\n        traits: [\n          idTrait,\n          titleTrait,\n          autoTrait,\n          minTrait,\n          columnsTrait,\n          rowsTrait,\n          columnGapTrait,\n          rowGapTrait,\n          toggleTrait,\n          resetTrait,\n          clearTrait,\n          updateTrait\n        ],\n        resizable: {\n          tl: 0,\n          tc: 0,\n          tr: 0,\n          cl: 0,\n          cr: 0,\n          bl: 0,\n          br: 0,\n          minDim: 5\n        },\n        min: 200,\n        auto: false\n      },\n      init() {\n        const cc = editor.Css;\n        const st = store(opts);\n        st.mutations.initialArrIndex(st.state, '');\n        this.set('rows', st.state.rows);\n        this.set('columns', st.state.columns);\n        this.set('rowgap', st.state.rowgap);\n        this.set('columngap', st.state.columngap);\n        this.set('store', st);\n        this.addStyle({\n          'grid-template-rows': st.getters.rowTemplate(st.state),\n          'grid-template-columns': st.getters.colTemplate(st.state),\n        });\n        this.get('classes').pluck('name').indexOf(gridClass) < 0 && this.addClass(gridClass);\n        cc.getRule(`.${gridClass}`) || cc.setRule(`.${gridClass}`, {\n          display: 'grid',\n          padding: '10px',\n          height: '95%',\n          width: '100%',\n        });\n        if (!editor.Grid.container || !editor.Grid.el) editor.Grid.render(`#${pfx}tools`, st);\n        editor.Grid.update(st);\n        this.on(\"change:auto\", this.updateAuto);\n        this.on(\"change:rows\", this.updateRows);\n        this.on(\"change:columns\", this.updateColumns);\n        this.on(\"change:rowgap\", this.updateRowgap);\n        this.on(\"change:columngap\", this.updateColumngap);\n        this.on(\"change:min\", this.updateMin);\n        this.on(\"change:status\", this.onStatusChange);\n      },\n      updateRows() {\n        const rows = parseInt(this.get('rows'));\n        const store = this.get('store');\n        const payload = {\n          newVal: rows,\n          oldVal: store.state.rows,\n          direction: \"rowArr\"\n        };\n        store.mutations.updateRows(store.state, rows);\n        store.mutations.adjustArr(store.state, payload);\n        editor.Grid.update(store);\n        this.addStyle({\n          'grid-template-rows': store.getters.rowTemplate(store.state)\n        });\n      },\n      updateColumns() {\n        const columns = parseInt(this.get('columns'));\n        const store = this.get('store');\n        const payload = {\n          newVal: columns,\n          oldVal: store.state.columns,\n          direction: \"colArr\"\n        };\n        store.mutations.updateColumns(store.state, columns);\n        store.mutations.adjustArr(store.state, payload);\n        editor.Grid.update(store);\n        this.addStyle({\n          'grid-template-columns': store.getters.colTemplate(store.state)\n        });\n      },\n      updateRowgap() {\n        const rowgap = this.get('rowgap');\n        const store = this.get('store');\n        store.mutations.updateRowGap(store.state, parseInt(rowgap));\n        editor.Grid.updateChildren(store);\n        this.addStyle({ 'grid-row-gap': `${rowgap}px` });\n      },\n      updateColumngap() {\n        const columngap = this.get('columngap');\n        const store = this.get('store');\n        store.mutations.updateColumnGap(store.state, parseInt(columngap));\n        editor.Grid.updateChildren(store);\n        this.addStyle({ 'grid-column-gap': `${columngap}px` });\n      },\n      updateMin() {\n        const min = parseInt(this.get('min'));\n        const store = this.get('store');\n        store.mutations.updateMin(store.state, min);\n      },\n      updateAuto() {\n        const auto = !!this.get('auto');\n        const store = this.get('store');\n        store.mutations.updateAuto(store.state, auto);\n        if (auto) (editor.Grid.visible = false) || (editor.Grid.getEl().style.display = 'none');\n      },\n      onStatusChange() {\n        const status = this.get('status');\n        if (status === 'selected') editor.Grid.select(editor.getSelected());\n        else (editor.Grid.visible = false) || (editor.Grid.getEl().style.display = 'none');\n      },\n      ...gridComponent\n    }\n  });\n};\n","import { gridCompId } from './consts'\n\nexport default (editor, opts = {}) => {\n  const bm = editor.BlockManager;\n  const { labelGrid, categoryGrid, gridBlock } = opts;\n\n  gridBlock && bm.add(gridCompId, {\n    label: labelGrid,\n    media: '<svg viewBox=\"0 0 24 24\"><rect fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" x=\"3\" y=\"3\" width=\"7\" height=\"7\"/><rect fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" x=\"14\" y=\"3\" width=\"7\" height=\"7\"/><rect fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" x=\"14\" y=\"14\" width=\"7\" height=\"7\"/><rect fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" x=\"3\" y=\"14\" width=\"7\" height=\"7\"/></svg>',\n    category: categoryGrid,\n    content: { type: gridCompId },\n    ...gridBlock\n  });\n}","import { cmdSave } from './consts';\n\nexport default (editor, config) => {\n    const cm = editor.Commands;\n    const pn = editor.Panels;\n    const um = editor.UndoManager;\n    const pfx = editor.Config.stylePrefix;\n\n    cm.add(cmdSave, e => {\n        editor.store(res => console.log(\"Saved...\"));\n    });\n\n    const pnOptions = pn.getPanel('options');\n    pnOptions.get('buttons').add([{\n        id: 'undo',\n        className: 'fa fa-undo', //reply\n        attributes: { title: 'undo' },\n        command: e => e.runCommand('core:undo'),\n    }, {\n        id: 'redo',\n        className: 'fa fa-repeat', //share\n        attributes: { title: 'redo' },\n        command: e => e.runCommand('core:redo'),\n    }, {\n        id: cmdSave,\n        className: 'fa fa-floppy-o',\n        attributes: { title: 'save' },\n        command: e => e.runCommand(cmdSave),\n    }]);\n\n    const undoBtn = pn.getButton('options', 'undo');\n    const redoBtn = pn.getButton('options', 'redo');\n    const saveBtn = pn.getButton('options', cmdSave);\n\n    editor.on('component:update', () => {\n        um.hasUndo() ? undoBtn.set('className', `${pfx}font-aqua fa fa-undo`) : undoBtn.set('className', 'fa fa-undo');\n        um.hasRedo() ? redoBtn.set('className', `${pfx}font-aqua fa fa-repeat`) : redoBtn.set('className', 'fa fa-repeat');\n        editor.getDirtyCount() > 0 ? saveBtn.set('className', `${pfx}font-green fa fa-floppy-o`) : saveBtn.set('className', 'fa fa-floppy-o');\n    });\n}","// Based on https://github.com/sdras/cssgridgenerator\n\nexport default (editor, opts = {}) => {\n    const { $ } = editor;\n    const pfx = editor.Config.stylePrefix;\n\n    return {\n        gridEl(store) {\n            const { width, height, top } = this.dimensions();\n            const el = $(`<div id=\"${pfx}grid-main\" style=\"display:${this.visible ? 'block' : 'none'};width:${width - 6}px;height:${height - 6}px\">\n                <div id=\"${pfx}gridcontainer\">\n                </div>\n            </div>`);\n            const gridcontainer = el.find(`#${pfx}gridcontainer`);\n            el.prepend(this.gridColUnits(store, width, height, top));\n            el.prepend(this.gridRowUnits(store));\n            gridcontainer.append(this.gridCanvas(store));\n            gridcontainer.append(this.gridCanvasChildren(store));\n            return el;\n        },\n        gridColUnits(store, width, height, top) {\n            const colunits = $(`<section\n                style=\"width:${width - 6}px;top:${top < 40 ? height : -40}px;grid-template-columns:${store.getters.colTemplate(store.state)};grid-template-rows:50px;\n                grid-column-gap:${store.state.columngap + 'px'};grid-row-gap:${store.state.rowgap + 'px'}\"\n                class=\"${pfx}colunits\"\n                >\n                    ${store.state.colArr.map((col, i) => `<div data-key=\"${i}\">\n                        <input\n                        value=\"${col.unit}\"\n                        data-key=\"${i}\"\n                        data-direction=\"col\"\n                        class=\"${store.state.columns > 8 ? this.widthfull : this.widthhalf}\"\n                        aria-label=\"Grid Template Column Measurements\"\n                        >\n                    </div>`).join(\"\")}\n                </section>`);\n\n            const inputscol = colunits.find('input');\n            inputscol.on('change', e => this.validateunit(e));\n\n            return colunits\n        },\n        gridRowUnits(store) {\n            const rowunits = $(`<section\n                style=\"grid-template-columns:50px;grid-template-rows:${store.getters.rowTemplate(store.state)};\n                    grid-column-gap:${store.state.columngap + 'px'};grid-row-gap:${store.state.rowgap + 'px'}\"\n                class=\"${pfx}rowunits\"\n                >\n                    ${store.state.rowArr.map((row, i) => `<div data-key=\"${i}\">\n                        <input\n                        value=\"${row.unit}\"\n                        data-key=\"${i}\"\n                        data-direction=\"row\"\n                        class=\"${this.widthfull}\"\n                        aria-label=\"Grid Template Row Measurements\"\n                        >\n                    </div>`).join(\"\")}\n                </section>`);\n\n            const inputsrow = rowunits.find('input');\n            inputsrow.on('change', e => this.validateunit(e));\n\n            return rowunits;\n        },\n        gridCanvas(store) {\n            const gridsection = $(`<section\n                class=\"${pfx}grid ${pfx}gridcanvas\"\n                style=\"grid-template-columns:${store.getters.colTemplate(store.state)};grid-template-rows:${store.getters.rowTemplate(store.state)};\n                    grid-column-gap:${store.state.columngap + 'px'};grid-row-gap:${store.state.rowgap + 'px'}\"\n                >\n                ${Array(store.getters.divNum(store.state)).fill().map((item, i) => `<div\n                    data-key=\"${i}\"\n                    class=\"box${i}\"\n                    >\n                </div>`).join(\"\")}\n            </section>`);\n            gridsection.on('ontouchstart', e => {\n                e.preventDefault();\n                this.delegatedTouchPlaceChild(e);\n            });\n            gridsection.on('ontouchend', e => {\n                e.preventDefault();\n                this.delegatedTouchPlaceChild(e);\n            });\n            const place = gridsection.find('div');\n            place.on('mousedown', e => this.placeChild(e, 's'));\n            place.on('mouseup', e => this.placeChild(e, 'e'));\n\n            return gridsection;\n        },\n        gridCanvasChildren(store) {\n            const gridchild = $(`<section\n                class=\"${pfx}grid ${pfx}gridchild\"\n                style=\"grid-template-columns:${store.getters.colTemplate(store.state)};grid-template-rows:${store.getters.rowTemplate(store.state)}; \n                    grid-column-gap:${store.state.columngap + 'px'};grid-row-gap:${store.state.rowgap + 'px'}\"\n                >\n                ${store.state.childarea.map((child, i) => `<div\n                    class=\"child${i}\"\n                    style=\"grid-area: ${child}\"\n                    >\n                    <button data-key=\"${i}\">&times;</button>\n                </div>`).join(\"\")}\n            </section>`);\n            const del = gridchild.find('button');\n            del.on('click', e => this.removeChild(e));\n\n            return gridchild;\n        },\n        render(cont, store) {\n            if (!this.el) {\n                this.el = this.gridEl(store);\n                this.container = $(cont);\n                this.container.append(this.el);\n                editor.on('styleManager:change:height run:smoothresize run:resize', () => {\n                    const st = editor.getSelected().get('store');\n                    st && editor.Grid.visible && editor.Grid.update(st);\n                });\n            }\n        },\n        getEl() {\n            return this.el.get(0);\n        },\n        select(selected) {\n            this.selected = selected;\n        },\n        update(store) {\n            this.el = this.gridEl(store);\n            $(`#${pfx}grid-main`).replaceWith(this.el);\n        },\n        updateRows(store) {\n            $(`.${pfx}rowunits`).replaceWith(this.gridRowUnits(store));\n        },\n        updateCols(store) {\n            const { width, height, top } = this.dimensions();\n            $(`.${pfx}colunits`).replaceWith(this.gridRowUnits(store, width, height, top));\n        },\n        updateCanvas(store) {\n            $(`.${pfx}gridcanvas`).replaceWith(this.gridCanvas(store));\n        },\n        updateChildren(store) {\n            $(`.${pfx}gridchild`).replaceWith(this.gridCanvasChildren(store));\n        },\n        child: {},\n        widthfull: `${pfx}widthfull`,\n        widthhalf: `${pfx}widthhalf`,\n        errors: { col: [], row: [] },\n        visible: false,\n        dimensions() {\n            return (this.selected && editor.Canvas.getElementPos(this.selected.getEl())) || {\n                width: 100,\n                height: 100\n            }\n        },\n        validateunit(e) {\n            const unit = e.target.value;\n            const i = e.target.getAttribute('data-key');\n            const direction = e.target.getAttribute('data-direction');\n            const check =\n                /fr$/.test(unit) ||\n                /px$/.test(unit) ||\n                /%$/.test(unit) ||\n                /em$/.test(unit) ||\n                /rem$/.test(unit) ||\n                /vw$/.test(unit) ||\n                /vh$/.test(unit) ||\n                /vmin$/.test(unit) ||\n                /q$/.test(unit) ||\n                /mm$/.test(unit) ||\n                /cm$/.test(unit) ||\n                /in$/.test(unit) ||\n                /pt$/.test(unit) ||\n                /pc$/.test(unit) ||\n                /ex$/.test(unit) ||\n                /ch$/.test(unit) ||\n                /minmax/.test(unit) || [\"auto\", \"min-content\", \"max-content\"].includes(unit) ||\n                parseInt(unit, 10) === 0; // allow 0 as a valid value without a unit\n            if (!check) {\n                this.errors[direction].push(i);\n            } else {\n                const store = this.selected.get('store');\n                this.errors[direction].splice(this.errors[direction].indexOf(i), 1);\n                if (direction === 'col') {\n                    store.state.colArr[i].unit = unit;\n                    this.selected.addStyle({\n                        'grid-template-columns': store.getters.colTemplate(store.state)\n                    });\n                } else {\n                    store.state.rowArr[i].unit = unit;\n                    this.selected.addStyle({\n                        'grid-template-rows': store.getters.rowTemplate(store.state)\n                    });\n                }\n                this.update(store);\n            }\n        },\n        delegatedTouchPlaceChild(ev) {\n            const target = document.elementFromPoint(\n                ev.changedTouches[0].clientX,\n                ev.changedTouches[0].clientY\n            );\n            const startend = ev.type === \"touchstart\" ? \"s\" : \"e\";\n            this.placeChild(target.dataset.id, startend);\n        },\n        placeChild(ev, startend) {\n            const store = this.selected.get('store');\n            const item = parseInt(ev.target.getAttribute('data-key')) + 1;\n            //built an object first because I might use this for something else\n            this.child[`${startend}row`] = Math.ceil(item / store.state.columns);\n            this.child[`${startend}col`] =\n                item - (this.child[`${startend}row`] - 1) * store.state.columns;\n            //create the children css units as a string\n            if (startend === \"e\") {\n                // flip starts and ends if dragged in the opposite direction\n                let [startRow, endRow] =\n                    this.child.srow <= this.child.erow ? [this.child.srow, this.child.erow] : [this.child.erow, this.child.srow];\n                let [startCol, endCol] =\n                    this.child.scol <= this.child.ecol ? [this.child.scol, this.child.ecol] : [this.child.ecol, this.child.scol];\n                let childstring = `${startRow} / ${startCol} / ${endRow +\n                    1} / ${endCol + 1}`;\n                store.mutations.addChildren(store.state, childstring);\n            }\n            this.updateChildren(store);\n        },\n        removeChild(ev) {\n            const store = this.selected.get('store');\n            const index = ev.target.getAttribute('data-key');\n            store.mutations.removeChildren(store.state, index);\n            this.updateChildren(store);\n        }\n    }\n};","import loadComponents from './components';\nimport loadBlocks from './blocks';\nimport loadPanels from './panels';\nimport grid from './grid';\nimport { breadcrumbs, palette, resizer } from './utils';\n\nexport default (editor, opts = {}) => {\n  const options = {\n    ...{\n      // use plugin panels\n      panels: 0,\n      // show canvas resizer\n      resizer: 1,\n      // show breadcrumbs\n      breadcrumbs: 1,\n      // label for grid block\n      labelGrid: 'Grid',\n      // category for grid block\n      categoryGrid: 'Basic',\n      // options to extend grid block\n      gridBlock: {},\n      // options to extend grid component model\n      gridComponent: {},\n      // options to extend cell component model\n      cellComponent: {},\n      // grid class name\n      gridClass: 'grid',\n      // grid cell class name\n      gridCellClass: 'grid-cell',\n      // cell item class name\n      cellItemClass: 'cell-item',\n      // add palette command\n      commandId: 'add-palette',\n      // add palette modal label\n      labelColors: 'Image palette',\n      // add palette button text\n      labelApply: 'Add',\n      // add palette toolbar icon\n      paletteIcon: '<i class=\"fa fa-paint-brush\"></i>',\n      // custom onAdd\n      // onAdd: (color, palette) => {\n      //     Custom stuff\n      // } \n      onAdd: 0,\n      // The add button (HTMLElement) will be passed as an argument to this function, once created.\n      // This will allow you a higher customization.\n      addPalette: () => { },\n      // Number of colors to generate for pallete\n      colorsNum: 9,\n      // Refresh inputs on palette update\n      refreshPalette: [{\n        sector: 'typography',\n        name: 'Color',\n        property: 'color',\n        type: 'color',\n        defaults: 'black'\n      }, {\n        sector: 'decorations',\n        name: 'Background color',\n        property: 'background-color',\n        type: 'color'\n      }],\n      // Minimum value the screen can be resized\n      minScreenSize: 250,\n      // Dampen the drag speed\n      dragDampen: 1,\n      // Hide if zoom is not 100\n      hideOnZoom: 1,\n      // Add settings to style manager\n      traitsInSm: 1,\n      // Icons Map\n      icons: [{\n        type: 'body',\n        icon: '<i class=\"fa fa-cubes\"></i>'\n      },\n      {\n        type: 'wrapper',\n        icon: '<i class=\"fa fa-cubes\"></i>'\n      },\n      {\n        type: 'custom-code',\n        icon: '<i class=\"fa fa-code\"></i>'\n      },\n      {\n        type: 'script',\n        icon: '<i class=\"fa fa-file-code-o\"></i>'\n      },\n      {\n        type: 'comment',\n        icon: '<i class=\"fa fa-commenting-o\"></i>'\n      },\n      {\n        type: 'text',\n        icon: '<i class=\"fa fa-i-cursor\"></i>'\n      },\n      {\n        type: 'textnode',\n        icon: '<i class=\"fa fa-i-cursor\"></i>'\n      },\n      {\n        type: 'header',\n        icon: '<i class=\"fa fa-header\"></i>'\n      },\n      {\n        type: 'box',\n        icon: '<i class=\"fa fa-square-o\"></i>'\n      },\n      {\n        type: 'section',\n        icon: '<i class=\"fa fa-object-group\"></i>'\n      },\n      {\n        type: 'link',\n        icon: '<i class=\"fa fa-link\"></i>'\n      },\n      {\n        type: 'footer',\n        icon: '<i class=\"fa fa-long-arrow-down\"></i>'\n      },\n      {\n        type: 'input',\n        icon: '<i class=\"fa fa-keyboard-o\"></i>'\n      },\n      {\n        type: 'button',\n        icon: '<i class=\"fa fa-square\"></i>'\n      },\n      {\n        type: 'image',\n        icon: '<i class=\"fa fa-file-image-o\"></i>'\n      },\n      {\n        type: 'video',\n        icon: '<i class=\"fa fa-file-video-o\"></i>'\n      },\n      {\n        type: 'row',\n        icon: '<i class=\"fa fa-ellipsis-h\"></i>'\n      },\n      {\n        type: 'cell',\n        icon: '<i class=\"fa fa-ellipsis-v\"></i>'\n      },\n      {\n        type: 'table',\n        icon: '<i class=\"fa fa-table\"></i>'\n      },\n      {\n        type: 'thead',\n        icon: '<i class=\"fa fa-header\"></i>'\n      },\n      {\n        type: 'tbody',\n        icon: '<i class=\"fa fa-book\"></i>'\n      },\n      {\n        type: 'tfoot',\n        icon: '<i class=\"fa fa-anchor\"></i>'\n      },\n      {\n        type: 'column',\n        icon: '<i class=\"fa fa-ellipsis-v\"></i>'\n      },\n      {\n        type: 'map',\n        icon: '<i class=\"fa fa-map-o\"></i>'\n      },\n      {\n        type: 'label',\n        icon: '<i class=\"fa fa-tag\"></i>'\n      },\n      {\n        type: 'checkbox',\n        icon: '<i class=\"fa fa-check-square-o\"></i>'\n      },\n      {\n        type: 'textarea',\n        icon: '<i class=\"fa fa-align-left\"></i>'\n      },\n      {\n        type: 'select',\n        icon: '<i class=\"fa fa-caret-square-o-down\"></i>'\n      },\n      {\n        type: 'radio',\n        icon: '<i class=\"fa fa-dot-circle-o\"></i>'\n      },\n      {\n        type: 'form',\n        icon: '<i class=\"fa fa-address-card-o\"></i>'\n      },\n      {\n        type: 'svg',\n        icon: '<i class=\"fa fa-diamond\"></i>'\n      },\n      {\n        type: 'svg-in',\n        icon: '<i class=\"fa fa-diamond\"></i>'\n      },\n      {\n        type: 'nav',\n        icon: '<i class=\"fa fa-location-arrow\"></i>'\n      },\n      {\n        type: 'navbar',\n        icon: '<i class=\"fa fa-map-signs\"></i>'\n      },\n      {\n        type: 'navbar-container',\n        icon: '<i class=\"fa fa-object-group\"></i>'\n      },\n      {\n        type: 'navbar-menu',\n        icon: '<i class=\"fa fa-bars\"></i>'\n      },\n      {\n        type: 'burger-menu',\n        icon: '<i class=\"fa fa-bars\"></i>'\n      },\n      {\n        type: 'burger-line',\n        icon: '<i class=\"fa fa-bars\"></i>'\n      },\n      {\n        type: 'span',\n        icon: '<i class=\"fa fa-columns\"></i>'\n      },\n      {\n        type: 'countdown',\n        icon: '<i class=\"fa fa-clock-o\"></i>'\n      },\n      {\n        type: 'twitch',\n        icon: '<i class=\"fa fa-twitch\"></i>'\n      },\n      {\n        type: 'tooltip',\n        icon: '<i class=\"fa fa-comment-o\"></i>'\n      },\n      {\n        type: 'tabs',\n        icon: '<i class=\"fa fa-list-alt\"></i>'\n      },\n      {\n        type: 'tab',\n        icon: '<i class=\"fa fa-long-arrow-right\"></i>'\n      },\n      {\n        type: 'tab-container',\n        icon: '<i class=\"fa fa-object-group\"></i>'\n      },\n      {\n        type: 'tab-content',\n        icon: '<i class=\"fa fa-align-center\"></i>'\n      },\n      {\n        type: 'lory-slider',\n        icon: '<i class=\"fa fa-sliders\"></i>'\n      },\n      {\n        type: 'lory-frame',\n        icon: '<i class=\"fa fa-window-maximize\"></i>'\n      },\n      {\n        type: 'lory-slides',\n        icon: '<i class=\"fa fa-file-powerpoint-o\"></i>'\n      },\n      {\n        type: 'lory-slide',\n        icon: '<i class=\"fa fa-play-circle-o\"></i>'\n      },\n      {\n        type: 'lory-prev',\n        icon: '<i class=\"fa fa-caret-square-o-left\"></i>'\n      },\n      {\n        type: 'lory-next',\n        icon: '<i class=\"fa fa-caret-square-o-right\"></i>'\n      },\n      {\n        type: 'typed',\n        icon: '<i class=\"fa fa-text-height\"></i>'\n      },\n      {\n        type: 'default',\n        icon: '<i class=\"fa fa-cube\"></i>'\n      }\n      ]\n    },\n    ...opts\n  };\n\n  // Add components\n  loadComponents(editor, options);\n  // Add blocks\n  loadBlocks(editor, options);\n  // Add panels\n  options.panels && loadPanels(editor, options);\n  // Add breadcrumbs\n  options.breadcrumbs && breadcrumbs(editor, options);\n  // Add palette\n  palette(editor, options);\n  // Load resizer\n  options.resizer && resizer(editor, options);\n  // Load grid\n  editor.Grid = grid(editor, options);\n\n  editor.on('load', () => {\n    const $ = editor.$;\n    const pn = editor.Panels;\n    const pfx = editor.Config.stylePrefix;\n    const cmp = editor.Components;\n\n    //? Map layer icons to components\n    options.icons.forEach(icon => {\n      try {\n        cmp.getType(icon.type).model.prototype.defaults.icon = icon.icon;\n      } catch (error) { }\n    });\n\n    // Load and show settings and style manager\n    const openTmBtn = pn.getButton('views', 'open-tm');\n    openTmBtn && openTmBtn.set('active', 1);\n    const openSm = pn.getButton('views', 'open-sm');\n    openSm && openSm.set('active', 1);\n\n    // Add Settings Sector\n    if (options.traitsInSm) {\n      let traitsSector = $(`<div class=\"${pfx}sm-sector no-select\">\n      <div class=\"${pfx}sm-title\"><span class=\"icon-settings fa fa-cog\"></span> Settings</div>\n      <div class=\"${pfx}sm-properties\" style=\"display: none;\"></div></div>`);\n      const traitsProps = traitsSector.find(`.${pfx}sm-properties`);\n      traitsProps.append($(`.${pfx}trt-traits`));\n      $(`.${pfx}sm-sectors`).before(traitsSector);\n      traitsSector.find(`.${pfx}sm-title`).on('click', function () {\n        let traitStyle = traitsProps.get(0).style;\n        let hidden = traitStyle.display == 'none';\n        if (hidden) {\n          traitStyle.display = 'block';\n        } else {\n          traitStyle.display = 'none';\n        }\n      });\n      pn.removeButton('views', 'open-tm');\n      $(`.${pfx}pn-views .${pfx}pn-btn`).css('width', `${100 / pn.getPanel('views').buttons.length}%`);\n    }\n\n    // Body icon\n    const openLm = pn.getButton('views', 'open-layers');\n    openLm && openLm.set('active', 1);\n    $(`.${pfx}layer-name`)[0].innerHTML = '<i class=\"fa fa-cubes\"></i> Body';\n    openSm && openSm.set('active', 1);\n  });\n};"],"sourceRoot":""}